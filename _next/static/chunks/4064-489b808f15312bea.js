"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4064],{95372:function(e,s,r){var l=r(85893),t=r(86200),i=r(7384),a=r(8371),n=r(45161);r(67294),s.Z=e=>{let{value:s,...r}=e;return(0,l.jsx)(a.Vp,{size:"sm",variant:"solid",background:(0,n.ff)("grey.2","white.3"),w:"max-content",px:1,...r,children:(0,l.jsx)(t.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(i.B,{value:s,visibleDecimals:2,compact:!0})})})}},74666:function(e,s,r){var l=r(85893),t=r(45161),i=r(57747),a=r(96854);r(67294);var n=r(90851);s.Z=e=>{let{title:s,value:r,size:o,infoLabel:d,wfull:c=!1,woContainer:x}=e,m=(0,t.ff)("grey.7","white.7"),u=(0,t.ff)("#fff","white.1"),b=(0,t.ff)("grey.2","white.4"),h="lg"===o;return(0,l.jsxs)(i.xu,{width:{base:"100%",md:c?"100%":"max-content"},bg:x?"none":u,border:x?"none":"1px",borderColor:b,borderRadius:h?12:8,py:{base:2,md:h?4:2},px:{base:h?4:3,md:h?6:3},pe:x?{base:h?4:2,md:h?6:2}:{base:h?6:8,md:8},children:[(0,l.jsx)(n.Z,{textStyle:{base:"sm",md:h?"base":"sm"},mb:{base:0,md:h?1:0},fontWeight:h?500:400,color:m,w:"max-content",title:s,infolabel:d}),(0,l.jsx)(i.xu,{textStyle:{base:"xl",md:h?"3xl":"xl"},fontWeight:h?500:600,children:e.loading?(0,l.jsx)(a.O,{height:"30px",w:"24"}):r})]})}},88862:function(e,s,r){var l=r(85893),t=r(45161),i=r(7384);s.Z=e=>{let{value:s,isBorrowAPY:r,...a}=e,n="";return n=r?"yellow.5":Number(s)>0?"green.11":0>Number(s)?"red.5":(0,t.ff)("grey.8","white.11"),(0,l.jsx)(i.B,{visibleDecimals:2,color:n,value:s,fontWeight:600,...a})}},31887:function(e,s,r){r.d(s,{M:function(){return h}});var l=r(85893),t=r(1279),i=r(57747),a=r(71293),n=r(45161),o=r(34292),d=r(67294),c=r(87040),x=r(7384),m=r(78607),u=r(86200);let b=()=>(0,l.jsx)(i.xu,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,l.jsx)(a.x,{children:"\xa0"})}),h=e=>{let{incentives:s,displayBlank:r,showPer:h=!0}=e,[j,p]=(0,d.useState)(!1),{currentMarketData:y}=(0,m.f)(),v=(0,d.useMemo)(()=>(null==s?void 0:s.filter(e=>y.whiteListedIncentives.includes(e.rewardTokenSymbol.toLowerCase())))||s,[s]);if(!(v&&v.length>0))return r?(0,l.jsx)(b,{}):null;let g=v.some(e=>"Infinity"===e.incentiveAPR),f=g?"Infinity":v.reduce((e,s)=>e+ +s.incentiveAPR,0),w=g?"Infinity":"Infinity"!==f?(0,t.hE)(f||0).toNumber():"Infinity";return 0===w?r?(0,l.jsx)(b,{}):null:(0,l.jsx)(i.xu,{px:1,borderRadius:"md",cursor:"pointer",onClick:()=>{p(j)},border:"0.5px solid",borderColor:(0,n.ff)("grey.3","white.5"),children:(0,l.jsxs)(o.U,{gap:0,children:[(0,l.jsx)(i.xu,{sx:{display:"inline-flex"},children:(0,l.jsx)(i.xu,{w:"12px",h:"12px",children:v.length<5?(0,l.jsx)(l.Fragment,{children:v.filter(e=>"WETH"!==e.rewardTokenSymbol).map(e=>(0,l.jsx)(c.$,{type:"tokens",name:e.rewardTokenSymbol.toLowerCase(),width:"12px",height:"12px"},e.rewardTokenSymbol))}):(0,l.jsx)(l.Fragment,{children:v.slice(0,3).filter(e=>"WETH"!==e.rewardTokenSymbol).map(e=>(0,l.jsx)(c.$,{type:"tokens",name:e.rewardTokenSymbol.toLowerCase(),width:"12px",height:"12px"},e.rewardTokenSymbol))})})}),(0,l.jsx)(i.xu,{display:h?"block":"none",sx:{ml:1},children:(0,l.jsx)(u.b,{symbol:"%",fontSize:"xs",children:"Infinity"!==w?(0,l.jsx)(x.B,{value:(100*w).toFixed(2),compact:!0,visibleDecimals:2}):"Infinity"===w?(0,l.jsx)(a.x,{children:"âˆž"}):void 0})})]})})}},79446:function(e,s,r){var l=r(10777),t=r(78607),i=r(19152),a=r(42620),n=r(92321);s.Z=()=>{let[e,s]=(0,i.Yh)(e=>[e.formattedLegacyRewardData,e.userDataLoading]),{isConnected:r,address:o}=(0,n.m)(),{currentChainId:d}=(0,t.f)();return(0,l.a)({queryFn:e,queryKey:[a.i.LEGACY_USER_REWARDS,d,o,s],enabled:!!o&&r,refetchInterval:5e3,initialData:[]})}},71847:function(e,s,r){var l=r(80854),t=r(67294),i=r(17124),a=r(64163);s.Z=(e,s)=>{let r=e=>e.isWrappedBaseAsset?(0,i.QD)({symbol:s.baseAssetSymbol,underlyingAsset:l.hP.toLowerCase()}):{},{combinedAssets:n}=(0,t.useMemo)(()=>{let s=new Map;return(null==e?void 0:e.userReservesData)&&(e.userReservesData.filter(e=>{let{underlyingBalance:s}=e;return"0"!==s}).map(e=>{let l={...e,...e.reserve,...r(e.reserve)};return s.set(e.underlyingAsset,l),l}),e.userReservesData.reduce((e,l)=>{let{variableBorrows:t,stableBorrows:i,reserve:n}=l,o=t=>{let i={...l,borrowRateMode:t,...n,...r(n)},a=s.get(l.underlyingAsset);s.set(l.underlyingAsset,{...a,...i}),e.push(i)};return"0"!==t&&o(a.tk.Variable),"0"!==i&&o(a.tk.Stable),e},[])),{combinedAssets:Array.from(s.values())}},[e,s]);return{combinedAssets:n}}},19333:function(e,s,r){r.d(s,{Z:function(){return eN}});var l=r(85893),t=r(1279),i=r(48204),a=r(91516),n=r(18618),o=r(45161),d=r(34292),c=r(14225),x=r(55281),m=r(71293),u=r(93717),b=r(6216),h=r(57747),j=r(96854),p=r(61557),y=r(10991),v=r(99840),g=r(80510),f=r(15115),w=r(7384),k=r(81625),S=r(92321),_=r(48928),D=r(78607),B=r(86200),I=r(67294),A=r(68615),C=r(87040),P=e=>{let{title:s,info:r,data:t,loading:i}=e,a=(0,o.ff)("_Base Tooltip Icon","tooltip-trigger");return(0,l.jsxs)(d.U,{border:"1px",borderColor:(0,o.ff)("#00000010","#FFFFFF10"),bg:(0,o.ff)("white.9","grey.9"),borderRadius:"md",px:2,py:0,gap:1,children:[(0,l.jsx)(m.x,{fontSize:"sm",opacity:.5,children:s}),i?(0,l.jsx)(j.O,{height:"20px"}):(0,l.jsx)(h.xu,{fontSize:"sm",fontWeight:600,children:t}),r&&(0,l.jsx)(A.Z,{label:r||"info",children:(0,l.jsx)(C.$,{type:"other",cursor:"pointer",alt:"brand-icons",height:4,name:a})})]})},U=r(90851),F=e=>{let{title:s,info:r,data:t,loading:i,onClick:a,hover:n}=e;return(0,l.jsxs)(h.xu,{onClick:a,cursor:n?"pointer":"default",py:2,px:4,borderLeft:"1px",borderColor:(0,o.ff)("#00000010","#FFFFFF10"),children:[(0,l.jsx)(U.Z,{fontSize:"sm",infolabel:r,title:s,opacity:.5}),i?(0,l.jsx)(j.O,{height:"20px"}):(0,l.jsx)(h.xu,{fontSize:"md",children:t})]})},R=r(82730),E=r(17191),N=r(50151),Z=r(22797),z=r(64325),M=r(74574),T=r(82509),W=r(94160),Y=r(7316),L=r(64163),O=r(44394),V=r(82002),K=function(){let{isOpen:e,onOpen:s,onClose:r}=(0,R.q)(),{openEmodeModal:t}=(0,_.vR)(),i=(0,V.x)(),{currentMarket:a}=(0,D.f)(),{data:{user:n,eModes:d}}=(0,Y.Z)(),x=0===n.userEmodeCategoryId,m=(0,o.ff)("white","black"),u=(0,o.ff)("black","white");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(E.J,{isOpen:e,onClose:r,placement:"bottom",closeOnBlur:!0,children:[(0,l.jsx)(N.x,{children:(0,l.jsx)(Z.r,{id:"collaterization",isChecked:!x,onChange:s})}),(0,l.jsxs)(z.y,{color:u,bg:m,children:[(0,l.jsx)(M.Y,{fontWeight:"bold",border:"0",children:"Efficiency mode (E-mode)"}),(0,l.jsx)(T.b,{fontSize:"sm",fontWeight:500,sx:{textWrap:"wrap"},children:"E-mode increases your LTV for a selected category of assets up to 97%"}),(0,l.jsx)(W.D,{border:"0",display:"flex",alignItems:"center",justifyContent:"space-between",pb:4,children:x?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.z,{onClick:()=>{t(L._h.ENABLE)},variant:"filled",children:"Enable E-mode"})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(O.Z,{variant:"outlined",onClick:()=>{t(L._h.DISABLE)},"data-cy":"emode-disable",tracking_id:"open_e-mode_modal",tracking_params:{chainId:i,marketId:a,placement:"market_user_position_row"},children:"Disable E-Mode"})})})]})]})})},q=r(24209),H=r(88862),$=r(50474),G=r(20020),J=r(66712),Q=r(91170),X=r(1702),ee=r(4040),es=r(80972),er=r(49289),el=r(5674),et=r(2322),ei=r(3528),ea=r(37848),en=r(95372),eo=r(31887),ed=r(99733),ec=r(11163),ex=e=>{var s,r;let{item:t,marketId:i,apr:a}=e,{openLegacyBorrow:n,openLegacyRepay:u,openLegacySupply:b,openLegacyWithdraw:j,openCollateralChange:p}=(0,_.vR)(),[y]=(0,I.useState)(null),v=(0,ec.useRouter)(),g=(0,V.x)(),{currentMarket:f}=(0,D.f)(),[k,A]=(0,I.useState)(L.tk.Variable),{isConnected:C}=(0,S.m)(),P=!t.isActive||t.isFrozen||0>=Number(t.walletBalance)||!C,F=t.isFrozen||!C,R=!t.isActive||!C,E=!t.isActive||!C,N=k===L.tk.Stable?null==t?void 0:null===(s=t.reserve)||void 0===s?void 0:s.sIncentivesData:null==t?void 0:null===(r=t.reserve)||void 0===r?void 0:r.vIncentivesData;return(0,l.jsxs)(h.xu,{bg:(0,o.ff)("white.11","grey.11"),border:"1px",borderColor:(0,o.ff)("grey.3","white.5"),borderRadius:8,mb:4,p:4,children:[(0,l.jsxs)(d.U,{justifyContent:"space-between",maxW:"100%",mb:4,children:[(0,l.jsx)(et.Z,{symbol:null==t?void 0:t.reserve.iconSymbol,name:null==t?void 0:t.name,aprData:a}),(0,l.jsxs)(d.U,{borderColor:"white.4",children:[(0,l.jsx)(c.z,{size:{base:"sm",md:"md"},variant:"outline",onClick:()=>{(0,O.k)("go_to_reserve_overview",{chainId:g,marketId:f,reserve:t.symbol,placement:"market_user_position_card"}),v.push("/reserve-overview?underlyingAsset=".concat(t.underlyingAsset,"&marketName=").concat(f))},children:"Details"}),(0,l.jsxs)(J.v,{children:[(0,l.jsx)(Q.j,{ref:y,size:{base:"sm",md:"md"},as:c.z,children:"Manage"}),(0,l.jsx)(X.h,{children:(0,l.jsxs)(ee.q,{zIndex:999,children:[(0,l.jsx)(es.s,{onClick:()=>{(0,O.k)("open_borrow_modal",{chainId:g,marketId:f,reserve:t.symbol,placement:"market_user_position_card"}),n(t.underlyingAsset)},fontWeight:500,isDisabled:F,children:"Borrow More"}),(0,l.jsx)(es.s,{onClick:()=>{(0,O.k)("open_repay_modal",{chainId:g,marketId:f,reserve:t.symbol,placement:"market_user_position_card"}),u(t.underlyingAsset,t.borrowRateMode,t.isFrozen)},fontWeight:500,isDisabled:E,children:"Repay"}),(0,l.jsx)(es.s,{onClick:()=>{(0,O.k)("open_supply_modal",{chainId:g,marketId:f,reserve:t.symbol,placement:"market_user_position_card"}),b(t.underlyingAsset)},fontWeight:500,isDisabled:P,children:"Supply More"}),(0,l.jsx)(es.s,{onClick:()=>{(0,O.k)("open_withdraw_modal",{chainId:g,marketId:f,reserve:t.symbol,placement:"market_user_position_card"}),j(t.underlyingAsset)},fontWeight:500,isDisabled:R,children:"Withdraw"})]})})]})]})]}),(0,l.jsx)(er.i,{borderStyle:"dashed",mb:4}),(null==t?void 0:t.underlyingBalance)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"TOTAL SUPPLIED"}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(d.U,{gap:1,justifyContent:"flex-end",children:[(0,l.jsx)(w.B,{value:Number(null==t?void 0:t.underlyingBalance),visibleDecimals:2,compact:!0}),(0,l.jsx)(en.Z,{value:Number((null==t?void 0:t.underlyingBalanceUSD)==="0"?"":null==t?void 0:t.underlyingBalanceUSD)})]})})]}),(t.borrowRateMode===L.tk.Variable?t.variableBorrows:t.stableBorrows)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",mt:2,children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"TOTAL BORROWED"}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(d.U,{gap:1,justifyContent:"flex-end",children:[(0,l.jsx)(w.B,{value:Number(t.borrowRateMode===L.tk.Variable?t.variableBorrows:t.stableBorrows)}),(0,l.jsx)(en.Z,{value:Number(t.borrowRateMode===L.tk.Variable?t.variableBorrowsUSD:t.stableBorrowsUSD)})]})})]}),(null==t?void 0:t.underlyingBalance)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",mt:2,children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"COLLATERAL USAGE"}),(0,l.jsxs)(x.K,{children:[(0,l.jsx)(Z.r,{id:"collaterization",isChecked:t.usageAsCollateralEnabledOnUser,onChange:()=>{(0,O.k)("open_collateral-usage_modal",{chainId:g,marketId:f,reserve:t.symbol,placement:"market_user_position_card"}),p(t.underlyingAsset)}}),(null==t?void 0:t.isIsolated)&&(0,l.jsx)(ea.Z,{label:(0,l.jsx)(U.Z,{infolabel:(0,l.jsxs)(l.Fragment,{children:["Isolated assets have limited borrowing power and other assets cannot be used as collateral. ",(0,l.jsx)("br",{}),"Learn more in our ",(0,l.jsx)(ei.Z,{href:"https://discord.gg",children:"Discord"})]}),title:"Isolated"}),level:"MODERATE"})]})]}),(0,l.jsx)(er.i,{borderStyle:"dashed",mt:4,mb:4}),(0,l.jsxs)(el.M,{columns:2,children:[(0,l.jsxs)(x.K,{alignItems:"flex-start",justifyContent:"flex-start",children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"SUPPLY APY"}),(0,l.jsx)(h.xu,{children:(t.borrowRateMode===L.tk.Variable?t.variableBorrows:t.stableBorrows)==="0"?"-":(0,l.jsxs)(x.K,{gap:1,alignItems:"flex-start",children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(w.B,{value:100*Number(t.reserve.supplyAPY),visibleDecimals:2,compact:!0})}),(0,l.jsx)(eo.M,{incentives:null==t?void 0:t.aIncentivesData,symbol:null==t?void 0:t.iconSymbol})]}),(0,l.jsx)(ed.Z,{symbol:t.symbol,marketId:i})]})})]}),(0,l.jsxs)(x.K,{alignItems:"flex-end",justifyContent:"flex-end",children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"BORROW APY"}),(0,l.jsx)(h.xu,{children:(t.borrowRateMode===L.tk.Variable?t.variableBorrows:t.stableBorrows)==="0"?"-":(0,l.jsxs)(x.K,{gap:1,alignItems:"flex-end",children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(w.B,{value:100*Number(t.variableBorrowAPY),visibleDecimals:2,compact:!0})}),(0,l.jsx)(eo.M,{incentives:N,symbol:t.symbol})]}),(0,l.jsx)(ed.Z,{symbol:t.symbol,marketId:i,type:"borrow"})]})})]})]})]})},em=r(64698),eu=r(89993),eb=r(85105),eh=r(86115),ej=r(93676),ep=r(23694),ey=r(89555),ev=r(8371),eg=e=>{let{value:s,...r}=e;return(0,l.jsx)(ev.Vp,{size:"sm",variant:"solid",background:(0,o.ff)("grey.2","white.3"),w:"max-content",px:1,...r,children:(0,l.jsx)(w.B,{value:s,visibleDecimals:2,compact:!0})})},ef=r(12505),ew=e=>{var s,r,t;let{item:i,marketId:a,headers:u,apr:b}=e,{openLegacyBorrow:j,openLegacyRepay:p,openLegacySupply:y,openLegacyWithdraw:v,openCollateralChange:f}=(0,_.vR)(),[k]=(0,I.useState)(null),A=(0,ec.useRouter)(),{currentMarket:C}=(0,D.f)(),P=(0,V.x)(),[F,R]=(0,I.useState)(L.tk.Variable),{isConnected:E}=(0,S.m)(),[N]=(0,n.a)("(max-width: 740px)"),z=!i.isActive||i.isFrozen||0>=Number(i.walletBalance)||!E,M=i.isFrozen||!E||i.isIsolated,T=!i.isActive||!E,W=!i.isActive||!E,Y=F===L.tk.Stable?null==i?void 0:null===(s=i.reserve)||void 0===s?void 0:s.sIncentivesData:null==i?void 0:null===(r=i.reserve)||void 0===r?void 0:r.vIncentivesData,K=e=>{let s=null==u?void 0:u.find(s=>s.key===e);return null==s?void 0:s.show};return(0,l.jsxs)(g.Tr,{fontWeight:500,children:[K("name")&&(0,l.jsx)(em.Td,{onClick:()=>{(0,O.k)("go_to_reserve_overview",{chainId:P,marketId:C,reserve:i.symbol,placement:"market_user_position_row"}),A.push("/reserve-overview?underlyingAsset=".concat(i.underlyingAsset,"&marketName=").concat(C))},children:(0,l.jsxs)(h.xu,{display:"flex",children:[(0,l.jsx)(et.Z,{symbol:i.iconSymbol,name:i.name,count:N?8:24,aprData:b}),(0,l.jsx)(eu.h,{"aria-label":"Menu Colapse",icon:(0,l.jsx)(eb.X,{w:4,h:4,color:(0,o.ff)("grey.5","white.7"),ml:1}),variant:"normal",onClick:()=>""})]})}),K("status")&&(0,l.jsx)(em.Td,{children:i.isIsolated?(0,l.jsx)(ea.Z,{label:(0,l.jsx)(U.Z,{infolabel:(0,l.jsxs)(l.Fragment,{children:["Isolated assets have limited borrowing power and other assets cannot be used as collateral. ",(0,l.jsx)("br",{}),"Learn more in our ",(0,l.jsx)(ei.Z,{href:"https://discord.gg",children:"Discord"})]}),title:"Isolated"}),level:"MODERATE"}):(0,l.jsx)(ea.Z,{label:(0,l.jsxs)(d.U,{gap:1,children:[(0,l.jsx)(m.x,{children:"Collateral"}),(0,l.jsx)(eh.n,{color:"green.5"})]}),level:"LOW"})}),K("underlyingBalanceUSD")&&(0,l.jsx)(em.Td,{children:(null==i?void 0:i.underlyingBalance)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:Number((null==i?void 0:i.underlyingBalanceUSD)==="0"?"":null==i?void 0:i.underlyingBalanceUSD),visibleDecimals:2,compact:!0})}),(0,l.jsx)(eg,{value:Number(null==i?void 0:i.underlyingBalance)})]})}),K("variableBorrowsUSD")&&(0,l.jsx)(em.Td,{children:(i.borrowRateMode===L.tk.Variable?i.variableBorrows:i.stableBorrows)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:Number(i.borrowRateMode===L.tk.Variable?i.variableBorrowsUSD:i.stableBorrowsUSD),visibleDecimals:2,compact:!0})}),(0,l.jsx)(eg,{value:Number(i.borrowRateMode===L.tk.Variable?i.variableBorrows:i.stableBorrows)})]})}),K("sumSupplyAPY")&&(0,l.jsx)(em.Td,{children:(null==i?void 0:i.underlyingBalance)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(ep.Z,{aIncentivesData:null!==(t=i.aIncentivesData)&&void 0!==t?t:[],symbol:i.iconSymbol,supplyApy:i.reserve.supplyAPY}),(0,l.jsx)(ed.Z,{symbol:i.symbol,marketId:a})]})}),K("interestEarned")&&(0,l.jsx)(em.Td,{children:(null==i?void 0:i.interestEarned)===0?"":(0,l.jsx)(x.K,{gap:1,children:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number((null==i?void 0:i.interestEarned)===0?"":null==i?void 0:i.interestEarned),visibleDecimals:2,compact:!0})})})})}),K("sumBorrowAPY")&&(0,l.jsx)(em.Td,{children:(null==i?void 0:i.variableBorrowsUSD)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(d.U,{children:(0,l.jsx)(ej.Z,{aIncentivesData:null!=Y?Y:[],symbol:i.symbol,borrowApy:i.variableBorrowAPY})}),(0,l.jsx)(ed.Z,{symbol:i.symbol,marketId:a,type:"borrow"})]})}),K("interestPaid")&&(0,l.jsx)(em.Td,{children:(null==i?void 0:i.interestPaid)===0?"":(0,l.jsx)(x.K,{gap:1,children:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number((null==i?void 0:i.interestPaid)===0?"":-((null==i?void 0:i.interestPaid)*1)),visibleDecimals:2,compact:!0})})})})}),K("usageAsCollateralEnabledOnUser")&&(0,l.jsx)(em.Td,{children:(0,l.jsx)(x.K,{children:(0,l.jsx)(Z.r,{id:"collaterization",isChecked:i.usageAsCollateralEnabledOnUser,onChange:()=>{(0,O.k)("open_collateral-usage_modal",{chainId:P,marketId:C,reserve:i.symbol,placement:"market_user_position_row"}),f(i.underlyingAsset)}})})}),K("action")&&(0,l.jsx)(ef.Z,{sticky:"right",children:(0,l.jsxs)(J.v,{children:[(0,l.jsx)(Q.j,{ref:k,size:{base:"xs",md:"sm"},as:c.z,children:ey.ag._("Manage")}),(0,l.jsx)(X.h,{children:(0,l.jsxs)(ee.q,{zIndex:999,children:[(0,l.jsx)(es.s,{onClick:()=>{(0,O.k)("open_borrow_modal",{chainId:P,marketId:C,reserve:i.symbol,placement:"market_user_position_row"}),j(i.underlyingAsset)},isDisabled:M,children:ey.ag._("Borrow")}),(0,l.jsx)(es.s,{onClick:()=>{(0,O.k)("open_repay_modal",{chainId:P,marketId:C,reserve:i.symbol,placement:"market_user_position_row"}),p(i.underlyingAsset,i.borrowRateMode,i.isFrozen)},isDisabled:W,children:ey.ag._("Repay")}),(0,l.jsx)(es.s,{onClick:()=>{(0,O.k)("open_supply_modal",{chainId:P,marketId:C,reserve:i.symbol,placement:"market_user_position_row"}),y(i.underlyingAsset)},isDisabled:z,children:ey.ag._("Supply")}),(0,l.jsx)(es.s,{onClick:()=>{(0,O.k)("open_withdraw_modal",{chainId:P,marketId:C,reserve:i.symbol,placement:"market_user_position_row"}),v(i.underlyingAsset)},isDisabled:T,children:ey.ag._("Withdraw")})]})})]})})]})},ek=r(91489),eS=r(61514),e_=r(78188),eD=r(71847),eB=r(80854),eI=r(91173),eA=r(79446),eC=r(33168),eP=r(5385),eU=r(92406),eF=r(39332),eR=r(14543);let eE=[{key:"name",name:"Asset",defaultShow:!0,show:!0,disable:!0},{key:"status",name:"Status",defaultShow:!1,show:!1,disable:!1},{key:"underlyingBalanceUSD",name:"Supplied",defaultShow:!0,show:!0,disable:!1},{key:"variableBorrowsUSD",name:"Borrowed",defaultShow:!0,show:!0,disable:!1},{key:"sumSupplyAPY",name:"Supply APY",defaultShow:!0,show:!0,disable:!1},{key:"interestEarned",name:"Interest Earned",defaultShow:!0,show:!0,disable:!1},{key:"sumBorrowAPY",name:"Borrow APY",defaultShow:!0,show:!0,disable:!1},{key:"interestPaid",name:"Interest Paid",defaultShow:!0,show:!0,disable:!1},{key:"usageAsCollateralEnabledOnUser",name:"Collateral",defaultShow:!0,show:!0,disable:!1},{key:"action",name:"",defaultShow:!0,show:!0,disable:!1}];var eN=e=>{let{showNoData:s}=e,{currentMarket:r,currentChainId:A,currentMarketData:C,currentNetworkConfig:U}=(0,D.f)(),R=(0,eS.ZP)(),[E]=(0,n.a)("(min-width: 500px)"),{openClaimRewards:N,openHFModal:Z}=(0,_.vR)(),{isConnected:z}=(0,S.m)(),M=(0,eF.useRouter)(),{address:T}=(0,S.m)(),{walletBalances:W}=(0,eI.P)(),{data:O}=(0,eA.Z)(),{data:{user:V,reserves:J,loading:Q}}=(0,Y.Z)(),{combinedAssets:X}=(0,eD.Z)(V,U),ee=C.v3&&Object.keys((0,eC.YN)(J)).length>1,es=(0,o.ff)("#FFFFFF","black"),er=(0,o.ff)("grey.10","white.10"),el=(0,o.ff)(eR.mH["5"],eR.mH["6"]),et=(0,o.ff)("grey.6","white.7"),ei=(0,o.ff)("grey.10","white.9"),[ea,en]=I.useState(!0),[eo,ed]=I.useState(L.tk.Variable),ec=X.map(e=>{var s,r;return{...e,walletBalance:e.isWrappedBaseAsset?null===(s=W[eB.hP.toLowerCase()])||void 0===s?void 0:s.amount:null===(r=W[e.underlyingAsset])||void 0===r?void 0:r.amount}}),em=O.find(e=>e.marketName===C.marketTitle),eu=em?em.data.rewardToken:"0",eb=em?em.data.rewardUSD:0,eh=(0,I.useMemo)(()=>ec.map(e=>{var s,r,l;let t=eo===L.tk.Stable?null==e?void 0:null===(s=e.reserve)||void 0===s?void 0:s.sIncentivesData:null==e?void 0:null===(r=e.reserve)||void 0===r?void 0:r.vIncentivesData,{incentivesNetAPR:i}=(0,e_.Or)(null!==(l=e.aIncentivesData)&&void 0!==l?l:[],C),{incentivesNetAPR:a}=(0,e_.Or)(null!=t?t:[],C);return{...e,interestEarned:Number(e.underlyingBalanceUSD)*Number(e.supplyAPY),interestPaid:Number(e.variableBorrowsUSD)*Number(e.variableBorrowAPY),sumSupplyAPY:Number(e.reserve.supplyAPY)+Number(i),sumBorrowAPY:-Number(e.variableBorrowAPY)+Number(a)}}),[ec]),[ej,ep]=I.useState(eE),[ev,eg]=I.useState(null),ef=e=>{var s;let r=null===(s=eE.find(s=>s.key===e))||void 0===s?void 0:s.key;if(r)eg({key:r,direction:ev?"asc"===ev.direction?"desc":"desc"===ev.direction?"neutral":"asc":"asc"})},eN=(0,I.useMemo)(()=>ev&&"neutral"!==ev.direction?(0,k.d)(eh,null==ev?void 0:ev.key,null==ev?void 0:ev.direction):eh,[eh,ev]),eZ=(0,t.hE)((null==V?void 0:V.totalBorrowsMarketReferenceCurrency)||"0").plus((null==V?void 0:V.availableBorrowsMarketReferenceCurrency)||"0"),ez=eZ.eq(0)?"0":(0,t.hE)((null==V?void 0:V.totalBorrowsMarketReferenceCurrency)||"0").div(eZ).toFixed(),eM=(null==V?void 0:V.totalCollateralMarketReferenceCurrency)==="0"?"0":(0,t.hE)((null==V?void 0:V.totalBorrowsMarketReferenceCurrency)||"0").dividedBy((null==V?void 0:V.totalCollateralMarketReferenceCurrency)||"1").toFixed(),eT=()=>eN.reduce((e,s)=>e+(s.interestEarned||0),0),eW=()=>eN.reduce((e,s)=>e+(s.interestPaid||0),0);function eY(e){return(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(F,{title:ey.ag._("Net Worth"),data:(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:(null==e?void 0:e.netWorthUSD)||0,visibleDecimals:2})}),loading:Q}),(0,l.jsx)(F,{title:ey.ag._("Net APY"),data:(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(H.Z,{value:100*e.netAPY||0})}),loading:Q}),(0,l.jsx)(F,{title:"Net Interest",data:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number(eT()-eW()),visibleDecimals:2,compact:!0})})}),loading:Q}),(0,l.jsx)(F,{title:ey.ag._("Health Factor"),data:(0,l.jsxs)(d.U,{children:[(0,l.jsx)($.Z,{value:null==e?void 0:e.healthFactor}),(0,l.jsx)(c.z,{variant:"outline",size:"xs",onClick:()=>Z(e.healthFactor,eM,e.currentLoanToValue,e.currentLiquidationThreshold),children:ey.ag._("Details")})]}),loading:Q,hover:!0}),(0,l.jsx)(F,{title:ey.ag._("Available Rewards"),data:(0,l.jsxs)(d.U,{children:[(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:eb||0,visibleDecimals:2})}),eb>0&&(0,l.jsx)(c.z,{variant:"ghost",size:"xs",onClick:()=>N(eu,A),children:ey.ag._("Claim")})]}),loading:Q})]})}return 0===eN.length&&!Q&&s?(0,l.jsxs)(u.k,{bg:el,py:{base:4,md:8},px:{base:4,md:4},flexDir:"column",alignItems:"center",position:"relative",className:"lock-table-bg",children:[(0,l.jsx)(b.E,{height:"100%",position:"absolute",inset:0,src:"/images/Locks-bg.svg"}),(0,l.jsxs)(h.xu,{maxW:"360px",mb:6,textAlign:"center",children:[(0,l.jsx)(m.x,{fontWeight:600,fontSize:"lg",mb:1,color:ei,children:ey.ag._("Supply/Borrow Assets")}),(0,l.jsx)(m.x,{fontSize:"sm",color:et,children:ey.ag._("You can supply assets to the protocol to earn rewards or borrow assets to trade.")})]}),z?(0,l.jsx)(u.k,{gap:2,children:(0,l.jsx)(c.z,{onClick:()=>{M.push("/markets")},size:"sm",children:ey.ag._("View Markets")})}):(0,l.jsx)(eU.Z,{})]}):void 0===T||0===T.length?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(l.Fragment,{children:Q||0!==ec.length?(0,l.jsx)(eP.Z,{color:er,title:ey.ag._("User Positions"),dontShowByDefault:!1,rightComponent:0===ec.length?(0,l.jsx)(j.O,{width:100,height:7}):(0,l.jsx)(q.Z,{data:ej,onUpdate:e=>{ep(e),localStorage.setItem("marketUserPositionHeaderKeys",JSON.stringify(e))}}),children:(0,l.jsx)(h.xu,{mb:4,children:Q?(0,l.jsx)(G.Z,{}):(0,l.jsxs)(h.xu,{children:[ea&&!1,(0,l.jsxs)(h.xu,{bg:(0,o.ff)("#FFFFFF","transparent"),border:"1px",overflow:"hidden",borderRadius:"12px",borderBottom:ea?0:"1px",borderBottomRadius:ea?0:"12px",pb:ea?3:0,mb:ea?-3:0,borderColor:(0,o.ff)("grey.3","white.5"),children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(d.U,{flex:1,alignItems:"center",justifyContent:"left",children:(0,l.jsx)(m.x,{fontSize:"md",opacity:.5,color:er,pl:4,children:ey.ag._("Your Position")})}),(0,l.jsxs)(d.U,{children:[E&&eY(V),(0,l.jsx)(d.U,{px:4,py:5,bg:"white.3",height:"100%",onClick:()=>en(!ea),cursor:"pointer",children:ea?(0,l.jsx)(a.g,{fontSize:24}):(0,l.jsx)(i.v,{fontSize:24})})]})]}),!E&&ea&&eY(V),ea&&(0,l.jsxs)(d.U,{borderTop:"1px",borderTopColor:(0,o.ff)("#00000010","#FFFFFF10"),flexDir:{base:"column",md:"row"},gap:{base:0,md:1},alignItems:{base:"flex-start",md:"center"},children:[(0,l.jsxs)(x.K,{gap:0,flex:{base:1,md:.5},p:3,children:[(0,l.jsx)(m.x,{fontSize:"sm",opacity:.5,color:er,pl:1,mb:1,children:ey.ag._("Supply data")}),(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(P,{title:"".concat(ey.ag._("Balance"),":"),data:(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.totalLiquidityUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ey.ag._("APY")," :"),data:(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.earnedAPY)*100||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ey.ag._("Collateral")," :"),data:(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.totalCollateralUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ey.ag._("Interest:")," :"),data:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number(eT()),visibleDecimals:2,compact:!0})})})})]})]}),(0,l.jsxs)(x.K,{gap:0,borderLeft:{base:0,md:"1px"},borderTop:{base:"1px",md:"0"},flex:{base:1,md:.5},borderColor:"#FFFFFF10 !important",p:3,children:[(0,l.jsx)(m.x,{fontSize:"sm",opacity:.5,color:er,pl:1,mb:1,children:ey.ag._("Borrow data")}),(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(P,{title:"".concat(ey.ag._("Balance")," :"),data:(0,l.jsx)(B.b,{symbol:"USD",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.totalBorrowsUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ey.ag._("APY:")," :"),data:(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(w.B,{value:(null==V?void 0:V.debtAPY)*100||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ey.ag._("Power Used:")," :"),data:(0,l.jsx)(B.b,{symbol:"%",children:(0,l.jsx)(w.B,{value:ez||0,visibleDecimals:2})})}),(0,l.jsx)(P,{title:"".concat(ey.ag._("Interest:")," :"),data:(0,l.jsx)(B.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(B.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(w.B,{value:Number(eW()),visibleDecimals:2,compact:!0})})})}),ee&&(0,l.jsx)(P,{title:"".concat(ey.ag._("E-Mode:")," :"),data:(0,l.jsx)(K,{})})]})]})]})]}),ea&&E&&(0,l.jsx)(p.x,{mx:"auto",sx:{border:"1px",borderRadius:"12px",borderColor:(0,o.ff)("grey.3","white.5"),bgColor:(0,o.ff)("#FFFFFF","transparent"),padding:"0px",margin:"0px"},w:"100%",children:(0,l.jsxs)(y.i,{variant:"unstyled",bg:es,border:"none",children:[(0,l.jsx)(v.h,{children:(0,l.jsx)(g.Tr,{children:eE.map((e,s)=>(0,l.jsx)(ek.Z,{sticky:(null==eE?void 0:eE.length)-1===s?"right":void 0,onClick:()=>ef(e.key),sortDirection:(null==ev?void 0:ev.key)===e.key?null==ev?void 0:ev.direction:void 0,show:e.show,children:(0,l.jsx)(m.x,{children:ey.ag._(e.name)})},e.key))})}),(0,l.jsx)(f.p,{children:null==eN?void 0:eN.map((e,s)=>(0,l.jsx)(ew,{item:e,marketId:r,headers:ej,apr:R},s))})]})}),!E&&(0,l.jsx)(h.xu,{mt:ea?0:4,children:eN.map((e,s)=>(0,l.jsx)(ex,{item:e,marketId:r,apr:R},s))})]})})}):null})}}}]);