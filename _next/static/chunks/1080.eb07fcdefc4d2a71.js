(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1080],{1080:function(e,t,r){"use strict";r.r(t),r.d(t,{fromCognitoIdentity:function(){return i},fromCognitoIdentityPool:function(){return u},fromHttp:function(){return b},fromTemporaryCredentials:function(){return I},fromWebToken:function(){return S}});var o=r(1836);function n(e){return Promise.all(Object.keys(e).reduce((t,r)=>{let o=e[r];return"string"==typeof o?t.push([r,o]):t.push(o().then(e=>[r,e])),t},[])).then(e=>e.reduce((e,[t,r])=>(e[t]=r,e),{}))}function s(e){return async()=>{e.logger?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");let{GetCredentialsForIdentityCommand:t,CognitoIdentityClient:s}=await Promise.all([r.e(2017),r.e(8801),r.e(3233)]).then(r.bind(r,83233)),{Credentials:{AccessKeyId:i=function(e){throw new o.mV("Response from Amazon Cognito contained no access key ID",{logger:e})}(e.logger),Expiration:a,SecretKey:c=function(e){throw new o.mV("Response from Amazon Cognito contained no secret key",{logger:e})}(e.logger),SessionToken:l}=function(e){throw new o.mV("Response from Amazon Cognito contained no credentials",{logger:e})}(e.logger)}=await (e.client??new s(Object.assign({},e.clientConfig??{},{region:e.clientConfig?.region??e.parentClientConfig?.region}))).send(new t({CustomRoleArn:e.customRoleArn,IdentityId:e.identityId,Logins:e.logins?await n(e.logins):void 0}));return{identityId:e.identityId,accessKeyId:i,secretAccessKey:c,sessionToken:l,expiration:a}}}let i=e=>s({...e}),a="IdentityIds";class c{constructor(e="aws:cognito-identity-ids"){this.dbName=e}getItem(e){return this.withObjectStore("readonly",t=>{let r=t.get(e);return new Promise(e=>{r.onerror=()=>e(null),r.onsuccess=()=>e(r.result?r.result.value:null)})}).catch(()=>null)}removeItem(e){return this.withObjectStore("readwrite",t=>{let r=t.delete(e);return new Promise((e,t)=>{r.onerror=()=>t(r.error),r.onsuccess=()=>e()})})}setItem(e,t){return this.withObjectStore("readwrite",r=>{let o=r.put({id:e,value:t});return new Promise((e,t)=>{o.onerror=()=>t(o.error),o.onsuccess=()=>e()})})}getDb(){let e=self.indexedDB.open(this.dbName,1);return new Promise((t,r)=>{e.onsuccess=()=>{t(e.result)},e.onerror=()=>{r(e.error)},e.onblocked=()=>{r(Error("Unable to access DB"))},e.onupgradeneeded=()=>{let t=e.result;t.onerror=()=>{r(Error("Failed to create object store"))},t.createObjectStore(a,{keyPath:"id"})}})}withObjectStore(e,t){return this.getDb().then(r=>{let o=r.transaction(a,e);return o.oncomplete=()=>r.close(),new Promise((e,r)=>{o.onerror=()=>r(o.error),e(t(o.objectStore(a)))}).catch(e=>{throw r.close(),e})})}}class l{constructor(e={}){this.store=e}getItem(e){return e in this.store?this.store[e]:null}removeItem(e){delete this.store[e]}setItem(e,t){this.store[e]=t}}let d=new l,u=e=>(function({accountId:e,cache:t="object"==typeof self&&self.indexedDB?new c:"object"==typeof window&&window.localStorage?window.localStorage:d,client:i,clientConfig:a,customRoleArn:l,identityPoolId:u,logins:m,userIdentifier:g=m&&0!==Object.keys(m).length?void 0:"ANONYMOUS",logger:w,parentClientConfig:h}){w?.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");let f=g?`aws:cognito-identity-credentials:${u}:${g}`:void 0,p=async()=>{let{GetIdCommand:c,CognitoIdentityClient:d}=await Promise.all([r.e(2017),r.e(8801),r.e(3233)]).then(r.bind(r,83233)),g=i??new d(Object.assign({},a??{},{region:a?.region??h?.region})),y=f&&await t.getItem(f);if(!y){let{IdentityId:r=function(e){throw new o.mV("Response from Amazon Cognito contained no identity ID",{logger:e})}(w)}=await g.send(new c({AccountId:e,IdentityPoolId:u,Logins:m?await n(m):void 0}));y=r,f&&Promise.resolve(t.setItem(f,y)).catch(()=>{})}return(p=s({client:g,customRoleArn:l,logins:m,identityId:y}))()};return()=>p().catch(async e=>{throw f&&Promise.resolve(t.removeItem(f)).catch(()=>{}),e})})({...e});var m=r(39627);let g=(e,t)=>{if("https:"!==e.protocol&&"169.254.170.2"!==e.hostname&&"169.254.170.23"!==e.hostname&&"[fd00:ec2::23]"!==e.hostname){if(e.hostname.includes("[")){if("[::1]"===e.hostname||"[0000:0000:0000:0000:0000:0000:0000:0001]"===e.hostname)return}else{if("localhost"===e.hostname)return;let t=e.hostname.split("."),r=e=>{let t=parseInt(e,10);return 0<=t&&t<=255};if("127"===t[0]&&r(t[1])&&r(t[2])&&r(t[3])&&4===t.length)return}throw new o.mV(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};var w=r(91526),h=r(96632),f=r(67793);async function p(e,t){let r=(0,f.Ou)(e.body),n=await r.transformToString();if(200===e.statusCode){let e=JSON.parse(n);if("string"!=typeof e.AccessKeyId||"string"!=typeof e.SecretAccessKey||"string"!=typeof e.Token||"string"!=typeof e.Expiration)throw new o.mV("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:(0,h.uj)(e.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let r={};try{r=JSON.parse(n)}catch(e){}throw Object.assign(new o.mV(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:r.Code,Message:r.Message})}throw new o.mV(`Server responded with status: ${e.statusCode}`,{logger:t})}let y=(e,t,r)=>async()=>{for(let o=0;o<t;++o)try{return await e()}catch(e){await new Promise(e=>setTimeout(e,r))}return await e()},b=(e={})=>{let t;e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let r=e.credentialsFullUri;if(r)t=r;else throw new o.mV("No HTTP credential provider host provided.",{logger:e.logger});let n=new URL(t);g(n,e.logger);let s=new m.BX;return y(async()=>{let t=new w.aW({protocol:n.protocol,hostname:n.hostname,port:Number(n.port),path:n.pathname,query:Array.from(n.searchParams.entries()).reduce((e,[t,r])=>(e[t]=r,e),{}),fragment:n.hash});return e.authorizationToken&&(t.headers.Authorization=e.authorizationToken),p((await s.handle(t)).response)},e.maxRetries??3,e.timeout??1e3)},I=e=>{let t;return async()=>{e.logger?.debug("@aws-sdk/credential-providers - fromTemporaryCredentials (STS)");let n={...e.params,RoleSessionName:e.params.RoleSessionName??"aws-sdk-js-"+Date.now()};if(n?.SerialNumber){if(!e.mfaCodeProvider)throw new o.mV("Temporary credential requires multi-factor authentication, but no MFA code callback was provided.",{tryNextLink:!1,logger:e.logger});n.TokenCode=await e.mfaCodeProvider(n?.SerialNumber)}let{AssumeRoleCommand:s,STSClient:i}=await Promise.all([r.e(2017),r.e(2658),r.e(9101)]).then(r.bind(r,29101));if(t||(t=new i({...e.clientConfig,credentials:e.masterCredentials})),e.clientPlugins)for(let r of e.clientPlugins)t.middlewareStack.use(r);let{Credentials:a}=await t.send(new s(n));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new o.mV(`Invalid response from STS.assumeRole call with role ${n.RoleArn}`,{logger:e.logger});return{accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration,credentialScope:a.CredentialScope}}};r(18796);let C=e=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:t,roleSessionName:o,webIdentityToken:n,providerId:s,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:t}=await Promise.all([r.e(2017),r.e(2658),r.e(5268)]).then(r.bind(r,55268));l=t({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:e.parentClientConfig},e.clientPlugins)}return l({RoleArn:t,RoleSessionName:o??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:s,PolicyArns:i,Policy:a,DurationSeconds:c})},S=e=>C({...e})},18796:function(){}}]);