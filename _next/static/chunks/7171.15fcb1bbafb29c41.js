(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7171,5799],{73773:function(e,n,t){"use strict";e.exports=t.p+"static/media/thresh_sig_wasm_bg.8382342d.wasm"},89214:function(){},85568:function(){},73396:function(e,n,t){"use strict";t.r(n),t.d(n,{Ecdsa:function(){return g},EdDsa:function(){return C},ServerError:function(){return K},decryptData:function(){return U},encryptData:function(){return q},generateKey:function(){return B},getVersion:function(){return F},get_message_to_sign:function(){return s},initWasm:function(){return z}});var _,r=t(48764),i=t(86266),a=t(59353),o=t(27783),c=new i.ec("secp256k1"),g=class{id;masterKey;childKey;constructor(e,n,t){this.id=e,this.masterKey="string"==typeof n?JSON.parse(n):n,this.childKey="string"==typeof t?JSON.parse(t):t}static async gen(e,n){await z();let t=await function(e,n){let t=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),r=m,i=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),a=m;return d(_.ecdsa_keygen(t,r,i,a))}(e,"string"==typeof n?n:JSON.stringify(n));return new g(t.id,t.master_key,t.child_key)}static from(e){let n="string"==typeof e?JSON.parse(e):e;return new g(n.id,n.masterKey,n.childKey)}to(){return JSON.stringify({id:this.id,masterKey:this.masterKey,childKey:this.childKey})}pub(){return $(c.keyFromPublic({x:this.childKey.public.q.x,y:this.childKey.public.q.y}).getPublic().encodeCompressed("hex"))}async sign(e,n,t,_=!1){return await z(),this._sign(e,n,t,_)}async batchSign(e,n,t){return await z(),Promise.all(t.map(t=>this._sign(e,n,t)))}async _sign(e,n,t,r=!1){t=j(t),n="string"==typeof n?n:JSON.stringify(n);let i=new I(this.id,"",JSON.stringify(this.childKey)),a=JSON.parse(await function(e,n,t,r,i){let a=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),o=m,c=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),g=m,s=J(t,_.__wbindgen_malloc),b=m;A(r,I);var l=r.__destroy_into_raw();return d(_.ecdsa_sign(a,o,c,g,s,b,l,null==i?16777215:i?1:0))}(e,n,t,i,r));return{r:$(a.r),s:$(a.s),v:a.recid}}async signTx(e,n,t){await z();let r=new I(this.id,"",JSON.stringify(this.childKey)),i=JSON.parse(await function(e,n,t,r){let i=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),a=m,o=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),c=m,g=S(t,_.__wbindgen_malloc,_.__wbindgen_realloc),s=m;A(r,I);var b=r.__destroy_into_raw();return d(_.ecdsa_sign_tx(i,a,o,c,g,s,b))}(e,"string"==typeof n?n:JSON.stringify(n),JSON.stringify(t),r));return b(t)&&(i.v="0x"+(parseInt(i.v.substring(2),16)+2*(t?.chainId||1)+35).toString(16)),i}async signTronTx(e,n,t){await z();let _=t?.chainId||728126428;_="string"==typeof _&&_.startsWith("0x")?parseInt(_,16):Number(_);let i=Object.keys(t).filter(e=>["from","to","value","data","gas","originEnergyLimit","name","abi","consumeUserResourcePercent","tokenId","tokenValue"].includes(e)).reduce((e,n)=>(e[n]=t[n],e),{});i?.to||(i.originEnergyLimit=i?.originEnergyLimit||1e17),i?.data?.length>2&&(i.gas=i?.gas||`0x${Number(357e5).toString(16)}`);let a=await this.rpcRequest(e,n,_,"buildTransaction",{...i});if(!a.result)throw new K(a?.error?.code??10001,a?.error?.message??"System error","","");let o=a.result.transaction,c=await this.sign(e,n,$(o.txID));return o.signature=[c.r.toString("hex")+c.s.toString("hex")+`0${c.v}`],`0x${r.Buffer.from(JSON.stringify(o)).toString("hex")}`}async rpcRequest(e,n,t,_,...i){n="string"==typeof n?JSON.parse(n):n;let a=`${e.replace("api","rpc")}/evm-chain?chainId=${t}`,o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${r.Buffer.from(`${n.project_uuid}:${n.project_client_key}`,"utf8").toString("base64")}`},body:JSON.stringify({id:+new Date,jsonrpc:"2.0",chainId:t,method:_,params:i})});if(!o.ok)throw new K(10001,"System error, request failed");return o.json()}async refresh(e,n){await z();let t=new I(this.id,JSON.stringify(this.masterKey),""),r=await function(e,n,t){let r=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),i=m,a=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=m;A(t,I);var c=t.__destroy_into_raw();return d(_.ecdsa_rotate(r,i,a,o,c))}(e,"string"==typeof n?n:JSON.stringify(n),t),i=new g(r.id,r.master_key,r.child_key);return this.id=i.id,this.masterKey=i.masterKey,this.childKey=i.childKey,i}};function s(e){let n=JSON.parse(e);if(!b(n))return a.TransactionFactory.fromTxData(n).getMessageToSign();{let e=1;return"chainId"in n&&void 0!==n.chainId&&(e="number"==typeof n.chainId?n.chainId:n.chainId.startsWith("0x")?parseInt(n.chainId.substring(2),16):parseInt(n.chainId)),a.Transaction.fromTxData(n,{common:o.Common.custom({chainId:e},{hardfork:o.Hardfork.SpuriousDragon})}).getMessageToSign()}}function b(e){return!("type"in e)||void 0===e.type||"0x0"===e.type||0===e.type}var l=Array(128).fill(void 0);l.push(void 0,null,!0,!1);var w=l.length;function d(e){let n=l[e];return e<132||(l[e]=w,w=e),n}var u="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&u.decode();var f=null;function y(){return(null===f||0===f.byteLength)&&(f=new Uint8Array(_.memory.buffer)),f}function p(e,n){return e>>>=0,u.decode(y().subarray(e,e+n))}function h(e){w===l.length&&l.push(l.length+1);let n=w;return w=l[n],l[n]=e,n}var m=0,k="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},v="function"==typeof k.encodeInto?function(e,n){return k.encodeInto(e,n)}:function(e,n){let t=k.encode(e);return n.set(t),{read:e.length,written:t.length}};function S(e,n,t){if(void 0===t){let t=k.encode(e),_=n(t.length)>>>0;return y().subarray(_,_+t.length).set(t),m=t.length,_}let _=e.length,r=n(_)>>>0,i=y(),a=0;for(;a<_;a++){let n=e.charCodeAt(a);if(n>127)break;i[r+a]=n}if(a!==_){0!==a&&(e=e.slice(a)),r=t(r,_,_=a+3*e.length)>>>0;let n=v(e,y().subarray(r+a,r+_));a+=n.written}return m=a,r}var x=null;function O(){return(null===x||0===x.byteLength)&&(x=new Int32Array(_.memory.buffer)),x}function N(e,n,t){_._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__he561f054b64cb340(e,n,h(t))}function J(e,n){let t=n(1*e.length)>>>0;return y().set(e,t/1),m=e.length,t}function A(e,n){if(!(e instanceof n))throw Error(`expected instance of ${n.name}`);return e.ptr}function T(e,n){try{return e.apply(this,n)}catch(e){_.__wbindgen_exn_store(h(e))}}var I=class{static __wrap(e){e>>>=0;let n=Object.create(I.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();_.__wbg_ecdsakey_free(e)}get id(){let e,n;try{let i=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_ecdsakey_id(i,this.__wbg_ptr);var t=O()[i/4+0],r=O()[i/4+1];return e=t,n=r,p(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}set id(e){let n=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=m;_.__wbg_set_ecdsakey_id(this.__wbg_ptr,n,t)}get master_key(){let e,n;try{let i=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_ecdsakey_master_key(i,this.__wbg_ptr);var t=O()[i/4+0],r=O()[i/4+1];return e=t,n=r,p(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}set master_key(e){let n=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=m;_.__wbg_set_ecdsakey_master_key(this.__wbg_ptr,n,t)}get child_key(){let e,n;try{let i=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_ecdsakey_child_key(i,this.__wbg_ptr);var t=O()[i/4+0],r=O()[i/4+1];return e=t,n=r,p(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}set child_key(e){let n=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=m;_.__wbg_set_ecdsakey_child_key(this.__wbg_ptr,n,t)}constructor(e,n,t){let r=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),i=m,a=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=m,c=S(t,_.__wbindgen_malloc,_.__wbindgen_realloc),g=m,s=_.ecdsakey_new(r,i,a,o,c,g);return I.__wrap(s)}},R=class{static __wrap(e){e>>>=0;let n=Object.create(R.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();_.__wbg_eddsakey_free(e)}get id(){let e,n;try{let i=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_eddsakey_id(i,this.__wbg_ptr);var t=O()[i/4+0],r=O()[i/4+1];return e=t,n=r,p(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}set id(e){let n=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=m;_.__wbg_set_eddsakey_id(this.__wbg_ptr,n,t)}get key_agg(){let e,n;try{let i=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_eddsakey_key_agg(i,this.__wbg_ptr);var t=O()[i/4+0],r=O()[i/4+1];return e=t,n=r,p(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}set key_agg(e){let n=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=m;_.__wbg_set_eddsakey_key_agg(this.__wbg_ptr,n,t)}get key_pair(){let e,n;try{let i=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_eddsakey_key_pair(i,this.__wbg_ptr);var t=O()[i/4+0],r=O()[i/4+1];return e=t,n=r,p(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}set key_pair(e){let n=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=m;_.__wbg_set_eddsakey_key_pair(this.__wbg_ptr,n,t)}constructor(e,n,t){let r=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),i=m,a=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=m,c=S(t,_.__wbindgen_malloc,_.__wbindgen_realloc),g=m,s=_.eddsakey_new(r,i,a,o,c,g);return R.__wrap(s)}},K=class{static __wrap(e){e>>>=0;let n=Object.create(K.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){let e=this.__destroy_into_raw();_.__wbg_servererror_free(e)}get error_code(){return _.__wbg_get_servererror_error_code(this.__wbg_ptr)}set error_code(e){_.__wbg_set_servererror_error_code(this.__wbg_ptr,e)}get message(){let e,n;try{let i=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_servererror_message(i,this.__wbg_ptr);var t=O()[i/4+0],r=O()[i/4+1];return e=t,n=r,p(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}set message(e){let n=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=m;_.__wbg_set_servererror_message(this.__wbg_ptr,n,t)}get extra(){let e,n;try{let i=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_servererror_extra(i,this.__wbg_ptr);var t=O()[i/4+0],r=O()[i/4+1];return e=t,n=r,p(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}set extra(e){let n=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=m;_.__wbg_set_servererror_extra(this.__wbg_ptr,n,t)}get path(){let e,n;try{let i=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_servererror_path(i,this.__wbg_ptr);var t=O()[i/4+0],r=O()[i/4+1];return e=t,n=r,p(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(e,n)}}set path(e){let n=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),t=m;_.__wbg_set_servererror_path(this.__wbg_ptr,n,t)}constructor(e,n,t,r){let i=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),a=m;var o=null==t?0:S(t,_.__wbindgen_malloc,_.__wbindgen_realloc),c=m,g=null==r?0:S(r,_.__wbindgen_malloc,_.__wbindgen_realloc),s=m;let b=_.servererror_new(e,i,a,o,c,g,s);return K.__wrap(b)}};async function E(e,n){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,n)}catch(n){if("application/wasm"!=e.headers.get("Content-Type"));else throw n}let t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}{let t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}async function P(e){if(void 0!==_)return _;void 0===e&&(e=new t.U(t(73773)));let n=function(){let e={};return e.wbg={},e.wbg.__wbindgen_object_drop_ref=function(e){d(e)},e.wbg.__wbg_servererror_new=function(e){return h(K.__wrap(e))},e.wbg.__wbindgen_cb_drop=function(e){let n=d(e).original;return 1==n.cnt--&&(n.a=0,!0)},e.wbg.__wbindgen_string_new=function(e,n){return h(p(e,n))},e.wbg.__wbindgen_is_undefined=function(e){return void 0===l[e]},e.wbg.__wbg_getmessagetosign_e9412d530252fd1e=function(e,n,t){let r=J(s(p(n,t)),_.__wbindgen_malloc),i=m;O()[e/4+1]=i,O()[e/4+0]=r},e.wbg.__wbg_eddsakey_new=function(e){return h(R.__wrap(e))},e.wbg.__wbg_ecdsakey_new=function(e){return h(I.__wrap(e))},e.wbg.__wbindgen_string_get=function(e,n){let t=l[n],r="string"==typeof t?t:void 0;var i=null==r?0:S(r,_.__wbindgen_malloc,_.__wbindgen_realloc),a=m;O()[e/4+1]=a,O()[e/4+0]=i},e.wbg.__wbg_new_abda76e883ba8a5f=function(){return h(Error())},e.wbg.__wbg_stack_658279fe44541cf6=function(e,n){let t=S(l[n].stack,_.__wbindgen_malloc,_.__wbindgen_realloc),r=m;O()[e/4+1]=r,O()[e/4+0]=t},e.wbg.__wbg_error_f851667af71bcfc6=function(e,n){let t,r;try{t=e,r=n}finally{_.__wbindgen_free(t,r)}},e.wbg.__wbindgen_is_string=function(e){return"string"==typeof l[e]},e.wbg.__wbindgen_object_clone_ref=function(e){return h(l[e])},e.wbg.__wbg_instanceof_Window_c5579e140698a9dc=function(e){let n;try{n=l[e]instanceof Window}catch{n=!1}return n},e.wbg.__wbg_fetch_bb49ae9f1d79408b=function(e,n){return h(l[e].fetch(l[n]))},e.wbg.__wbg_origin_35ef5d6a71c924b6=function(e,n){let t=S(l[n].origin,_.__wbindgen_malloc,_.__wbindgen_realloc),r=m;O()[e/4+1]=r,O()[e/4+0]=t},e.wbg.__wbg_pathname_715df8a6b71fdfd7=function(e,n){let t=S(l[n].pathname,_.__wbindgen_malloc,_.__wbindgen_realloc),r=m;O()[e/4+1]=r,O()[e/4+0]=t},e.wbg.__wbg_search_24b39c2a5b10e06c=function(e,n){let t=S(l[n].search,_.__wbindgen_malloc,_.__wbindgen_realloc),r=m;O()[e/4+1]=r,O()[e/4+0]=t},e.wbg.__wbg_setsearch_7aeec58875c5946b=function(e,n,t){l[e].search=p(n,t)},e.wbg.__wbg_searchParams_d5568d267828eeea=function(e){return h(l[e].searchParams)},e.wbg.__wbg_new_f6818a0e274befa9=function(){return T(function(e,n){return h(new URL(p(e,n)))},arguments)},e.wbg.__wbg_instanceof_Response_7ade9a5a066d1a55=function(e){let n;try{n=l[e]instanceof Response}catch{n=!1}return n},e.wbg.__wbg_status_d2b2d0889f7e970f=function(e){return l[e].status},e.wbg.__wbg_ok_0a0ed9a1863d8af5=function(e){return l[e].ok},e.wbg.__wbg_text_65fa1887e8f7b4ac=function(){return T(function(e){return h(l[e].text())},arguments)},e.wbg.__wbg_instanceof_WorkerGlobalScope_5188d176509513d4=function(e){let n;try{n=l[e]instanceof WorkerGlobalScope}catch{n=!1}return n},e.wbg.__wbg_fetch_621998933558ad27=function(e,n){return h(l[e].fetch(l[n]))},e.wbg.__wbg_url_3325e0ef088003ca=function(e,n){let t=S(l[n].url,_.__wbindgen_malloc,_.__wbindgen_realloc),r=m;O()[e/4+1]=r,O()[e/4+0]=t},e.wbg.__wbg_newwithstr_49e8bfa3150f3210=function(){return T(function(e,n){return h(new Request(p(e,n)))},arguments)},e.wbg.__wbg_newwithstrandinit_a4cd16dfaafcf625=function(){return T(function(e,n,t){return h(new Request(p(e,n),l[t]))},arguments)},e.wbg.__wbg_new_5cb136b036dd2286=function(){return T(function(){return h(new URLSearchParams)},arguments)},e.wbg.__wbg_append_5b8ac576a0a2c65a=function(e,n,t,_,r){l[e].append(p(n,t),p(_,r))},e.wbg.__wbg_new_143b41b4342650bb=function(){return T(function(){return h(new Headers)},arguments)},e.wbg.__wbg_set_76353df4722f4954=function(){return T(function(e,n,t,_,r){l[e].set(p(n,t),p(_,r))},arguments)},e.wbg.__wbg_crypto_58f13aa23ffcb166=function(e){return h(l[e].crypto)},e.wbg.__wbindgen_is_object=function(e){let n=l[e];return"object"==typeof n&&null!==n},e.wbg.__wbg_process_5b786e71d465a513=function(e){return h(l[e].process)},e.wbg.__wbg_versions_c2ab80650590b6a2=function(e){return h(l[e].versions)},e.wbg.__wbg_node_523d7bd03ef69fba=function(e){return h(l[e].node)},e.wbg.__wbg_msCrypto_abcb1295e768d1f2=function(e){return h(l[e].msCrypto)},e.wbg.__wbg_require_2784e593a4674877=function(){return T(function(){return h(module.require)},arguments)},e.wbg.__wbindgen_is_function=function(e){return"function"==typeof l[e]},e.wbg.__wbg_getRandomValues_504510b5564925af=function(){return T(function(e,n){l[e].getRandomValues(l[n])},arguments)},e.wbg.__wbg_randomFillSync_a0d98aa11c81fe89=function(){return T(function(e,n){l[e].randomFillSync(d(n))},arguments)},e.wbg.__wbg_get_7303ed2ef026b2f5=function(e,n){return h(l[e][n>>>0])},e.wbg.__wbg_newnoargs_c9e6043b8ad84109=function(e,n){return h(Function(p(e,n)))},e.wbg.__wbg_next_ec061e48a0e72a96=function(){return T(function(e){return h(l[e].next())},arguments)},e.wbg.__wbg_done_b6abb27d42b63867=function(e){return l[e].done},e.wbg.__wbg_value_2f4ef2036bfad28e=function(e){return h(l[e].value)},e.wbg.__wbg_get_f53c921291c381bd=function(){return T(function(e,n){return h(Reflect.get(l[e],l[n]))},arguments)},e.wbg.__wbg_call_557a2f2deacc4912=function(){return T(function(e,n){return h(l[e].call(l[n]))},arguments)},e.wbg.__wbg_new_2b6fea4ea03b1b95=function(){return h({})},e.wbg.__wbg_self_742dd6eab3e9211e=function(){return T(function(){return h(self.self)},arguments)},e.wbg.__wbg_window_c409e731db53a0e2=function(){return T(function(){return h(window.window)},arguments)},e.wbg.__wbg_globalThis_b70c095388441f2d=function(){return T(function(){return h(globalThis.globalThis)},arguments)},e.wbg.__wbg_global_1c72617491ed7194=function(){return T(function(){return h(global.global)},arguments)},e.wbg.__wbg_instanceof_Error_fac23a8832b241da=function(e){let n;try{n=l[e]instanceof Error}catch{n=!1}return n},e.wbg.__wbg_message_eab7d45ec69a2135=function(e){return h(l[e].message)},e.wbg.__wbg_name_8e6176d4db1a502d=function(e){return h(l[e].name)},e.wbg.__wbg_toString_506566b763774a16=function(e){return h(l[e].toString())},e.wbg.__wbg_call_587b30eea3e09332=function(){return T(function(e,n,t){return h(l[e].call(l[n],l[t]))},arguments)},e.wbg.__wbg_entries_039ff76b77e573c1=function(e){return h(l[e].entries())},e.wbg.__wbg_now_c857fb0367c762cc=function(){return Date.now()},e.wbg.__wbg_toString_e2b23ac99490a381=function(e){return h(l[e].toString())},e.wbg.__wbg_new_2b55e405e4af4986=function(e,n){try{var t={a:e,b:n};let r=new Promise((e,n)=>{let r=t.a;t.a=0;try{var i;return i=t.b,void _.wasm_bindgen__convert__closures__invoke2_mut__h47250f64619b534a(r,i,h(e),h(n))}finally{t.a=r}});return h(r)}finally{t.a=t.b=0}},e.wbg.__wbg_resolve_ae38ad63c43ff98b=function(e){return h(Promise.resolve(l[e]))},e.wbg.__wbg_then_8df675b8bb5d5e3c=function(e,n){return h(l[e].then(l[n]))},e.wbg.__wbg_then_835b073a479138e5=function(e,n,t){return h(l[e].then(l[n],l[t]))},e.wbg.__wbg_buffer_55ba7a6b1b92e2ac=function(e){return h(l[e].buffer)},e.wbg.__wbg_newwithbyteoffsetandlength_88d1d8be5df94b9b=function(e,n,t){return h(new Uint8Array(l[e],n>>>0,t>>>0))},e.wbg.__wbg_new_09938a7d020f049b=function(e){return h(new Uint8Array(l[e]))},e.wbg.__wbg_set_3698e3ca519b3c3c=function(e,n,t){l[e].set(l[n],t>>>0)},e.wbg.__wbg_newwithlength_89eeca401d8918c2=function(e){return h(new Uint8Array(e>>>0))},e.wbg.__wbg_subarray_d82be056deb4ad27=function(e,n,t){return h(l[e].subarray(n>>>0,t>>>0))},e.wbg.__wbg_set_07da13cc24b69217=function(){return T(function(e,n,t){return Reflect.set(l[e],l[n],l[t])},arguments)},e.wbg.__wbindgen_debug_string=function(e,n){let t=S(function e(n){let t;let _=typeof n;if("number"==_||"boolean"==_||null==n)return`${n}`;if("string"==_)return`"${n}"`;if("symbol"==_){let e=n.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==_){let e=n.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(n)){let t=n.length,_="[";t>0&&(_+=e(n[0]));for(let r=1;r<t;r++)_+=", "+e(n[r]);return _+"]"}let r=/\[object ([^\]]+)\]/.exec(toString.call(n));if(!(r.length>1))return toString.call(n);if("Object"==(t=r[1]))try{return"Object("+JSON.stringify(n)+")"}catch(e){return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:t}(l[n]),_.__wbindgen_malloc,_.__wbindgen_realloc),r=m;O()[e/4+1]=r,O()[e/4+0]=t},e.wbg.__wbindgen_throw=function(e,n){throw Error(p(e,n))},e.wbg.__wbindgen_memory=function(){return h(_.memory)},e.wbg.__wbindgen_closure_wrapper734=function(e,n,t){return h(function(e,n,t,r){let i={a:e,b:n,cnt:1,dtor:222},a=(...e)=>{i.cnt++;let n=i.a;i.a=0;try{return r(n,i.b,...e)}finally{0==--i.cnt?_.__wbindgen_export_2.get(i.dtor)(n,i.b):i.a=n}};return a.original=i,a}(e,n,0,N))},e}();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:r,module:i}=await E(await e,n);return _=r.exports,P.__wbindgen_wasm_module=i,x=null,f=null,_.__wbindgen_start(),_}var j=e=>r.Buffer.isBuffer(e)?e:e instanceof Uint8Array?r.Buffer.from(e.buffer,e.byteOffset,e.byteLength):r.Buffer.from(e),$=e=>{for(var n=[],t=0;t<e.length;t+=2)n.push(parseInt(e.substr(t,2),16));return j(n)},D=e=>{if(e.length<1)return e;let n=e.length-1,t=0;for(let _=0;_<e.length/2;_++)t=e[_],e[_]=e[n],e[n]=t,n--;return e};async function W(e){return new Promise(n=>setTimeout(n,e))}async function B(e,n){return await z(),function(e,n){let t,r;try{let b=_.__wbindgen_add_to_stack_pointer(-16),l=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),w=m,u=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),f=m;_.hash_password(b,l,w,u,f);var i=O()[b/4+0],a=O()[b/4+1],o=O()[b/4+2],c=O()[b/4+3],g=i,s=a;if(c)throw g=0,s=0,d(o);return t=g,r=s,p(g,s)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,r)}}(e,n)}async function q(e,n){return await z(),function(e,n){let t,r;try{let b=_.__wbindgen_add_to_stack_pointer(-16),l=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),w=m,u=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),f=m;_.encrypt(b,l,w,u,f);var i=O()[b/4+0],a=O()[b/4+1],o=O()[b/4+2],c=O()[b/4+3],g=i,s=a;if(c)throw g=0,s=0,d(o);return t=g,r=s,p(g,s)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,r)}}(e,n)}async function U(e,n){return await z(),function(e,n){let t,r;try{let b=_.__wbindgen_add_to_stack_pointer(-16),l=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),w=m,u=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),f=m;_.decrypt(b,l,w,u,f);var i=O()[b/4+0],a=O()[b/4+1],o=O()[b/4+2],c=O()[b/4+3],g=i,s=a;if(c)throw g=0,s=0,d(o);return t=g,r=s,p(g,s)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,r)}}(e,n)}var C=class{id;keyAgg;keyPair;constructor(e,n,t){this.id=e,this.keyAgg="string"==typeof n?JSON.parse(n):n,this.keyPair="string"==typeof t?JSON.parse(t):t}static async gen(e,n){await z();let t=await function(e,n){let t=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),r=m,i=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),a=m;return d(_.eddsa_keygen(t,r,i,a))}(e,"string"==typeof n?n:JSON.stringify(n));return new C(t.id,t.key_agg,t.key_pair)}static from(e){let n="string"==typeof e?JSON.parse(e):e;return new C(n.id,n.keyAgg,n.keyPair)}to(){return JSON.stringify({id:this.id,keyAgg:this.keyAgg,keyPair:this.keyPair})}pub(){return $(this.keyAgg.apk.bytes_str)}async sign(e,n,t){return await z(),this._sign(e,n,t)}async batchSign(e,n,t){return await z(),Promise.all(t.map(t=>this._sign(e,n,t)))}async _sign(e,n,t){let i=new R(this.id,JSON.stringify(this.keyAgg),JSON.stringify(this.keyPair)),a=JSON.parse(await function(e,n,t,r){let i=S(e,_.__wbindgen_malloc,_.__wbindgen_realloc),a=m,o=S(n,_.__wbindgen_malloc,_.__wbindgen_realloc),c=m,g=J(t,_.__wbindgen_malloc),s=m;A(r,R);var b=r.__destroy_into_raw();return d(_.eddsa_sign(i,a,o,c,g,s,b))}(e,"string"==typeof n?n:JSON.stringify(n),j(t),i)),o=r.Buffer.from(a.R.bytes_str.padStart(64,"0"),"hex"),c=D(r.Buffer.from(a.s.padStart(64,"0"),"hex"));return r.Buffer.concat([o,c],64)}},L={initializing:!1,initialized:!1};async function z(){for(;L.initializing;)await W(10);if(!L.initialized){L.initializing=!0;try{await P(),L.initialized=!0}catch(e){}L.initializing=!1}}function F(){return"0.7.8"}}}]);