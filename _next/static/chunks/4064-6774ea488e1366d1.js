"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4064],{95372:function(e,r,s){var l=s(85893),i=s(86200),t=s(7384),n=s(8371),o=s(45161);s(67294),r.Z=e=>{let{value:r,...s}=e;return(0,l.jsx)(n.Vp,{size:"sm",variant:"solid",background:(0,o.ff)("grey.2","white.3"),w:"max-content",px:1,...s,children:(0,l.jsx)(i.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(t.B,{value:r,visibleDecimals:2,compact:!0})})})}},74666:function(e,r,s){var l=s(85893),i=s(45161),t=s(57747),n=s(96854);s(67294);var o=s(90851);r.Z=e=>{let{title:r,value:s,size:a,infoLabel:d,wfull:c=!1,woContainer:x}=e,u=(0,i.ff)("grey.7","white.7"),m=(0,i.ff)("#fff","white.1"),b=(0,i.ff)("grey.2","white.4"),h="lg"===a;return(0,l.jsxs)(t.xu,{width:{base:"100%",md:c?"100%":"max-content"},bg:x?"none":m,border:x?"none":"1px",borderColor:b,borderRadius:h?12:8,py:{base:2,md:h?4:2},px:{base:h?4:3,md:h?6:3},pe:x?{base:h?4:2,md:h?6:2}:{base:h?6:8,md:8},children:[(0,l.jsx)(o.Z,{textStyle:{base:"sm",md:h?"base":"sm"},mb:{base:0,md:h?1:0},fontWeight:h?500:400,color:u,w:"max-content",title:r,infolabel:d}),(0,l.jsx)(t.xu,{textStyle:{base:"xl",md:h?"3xl":"xl"},fontWeight:h?500:600,children:e.loading?(0,l.jsx)(n.O,{height:"30px",w:"24"}):s})]})}},88862:function(e,r,s){var l=s(85893),i=s(45161),t=s(7384);r.Z=e=>{let{value:r,isBorrowAPY:s,...n}=e,o="";return o=s?"yellow.5":Number(r)>0?"green.11":0>Number(r)?"red.5":(0,i.ff)("grey.8","white.11"),(0,l.jsx)(t.B,{compact:!0,visibleDecimals:2,color:o,value:r,fontWeight:"bold",...n})}},31887:function(e,r,s){s.d(r,{M:function(){return h}});var l=s(85893),i=s(1279),t=s(57747),n=s(71293),o=s(45161),a=s(34292),d=s(67294),c=s(87040),x=s(7384),u=s(78607),m=s(86200);let b=()=>(0,l.jsx)(t.xu,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,l.jsx)(n.x,{children:"\xa0"})}),h=e=>{let{incentives:r,displayBlank:s,showPer:h=!0}=e,[p,y]=(0,d.useState)(!1),{currentMarketData:v}=(0,u.f)(),j=(0,d.useMemo)(()=>(null==r?void 0:r.filter(e=>v.whiteListedIncentives.includes(e.rewardTokenSymbol.toLowerCase())))||r,[r]);if(!(j&&j.length>0))return s?(0,l.jsx)(b,{}):null;let f=j.some(e=>"Infinity"===e.incentiveAPR),w=f?"Infinity":j.reduce((e,r)=>e+ +r.incentiveAPR,0),g=f?"Infinity":"Infinity"!==w?(0,i.hE)(w||0).toNumber():"Infinity";return 0===g?s?(0,l.jsx)(b,{}):null:(0,l.jsx)(t.xu,{px:1,borderRadius:"md",cursor:"pointer",onClick:()=>{y(p)},border:"0.5px solid",borderColor:(0,o.ff)("grey.3","white.5"),children:(0,l.jsxs)(a.U,{gap:0,children:[(0,l.jsx)(t.xu,{sx:{display:"inline-flex"},children:(0,l.jsx)(t.xu,{w:"12px",h:"12px",children:j.length<5?(0,l.jsx)(l.Fragment,{children:j.filter(e=>"WETH"!==e.rewardTokenSymbol).map(e=>(0,l.jsx)(c.$,{type:"tokens",name:e.rewardTokenSymbol.toLowerCase(),width:"12px",height:"12px"},e.rewardTokenSymbol))}):(0,l.jsx)(l.Fragment,{children:j.slice(0,3).filter(e=>"WETH"!==e.rewardTokenSymbol).map(e=>(0,l.jsx)(c.$,{type:"tokens",name:e.rewardTokenSymbol.toLowerCase(),width:"12px",height:"12px"},e.rewardTokenSymbol))})})}),(0,l.jsx)(t.xu,{display:h?"block":"none",sx:{ml:1},children:(0,l.jsx)(m.b,{symbol:"%",fontSize:"xs",children:"Infinity"!==g?(0,l.jsx)(x.B,{value:(100*g).toFixed(2),compact:!0,visibleDecimals:2}):"Infinity"===g?(0,l.jsx)(n.x,{children:"âˆž"}):void 0})})]})})}},79446:function(e,r,s){var l=s(10777),i=s(78607),t=s(19152),n=s(42620),o=s(92321);r.Z=()=>{let[e,r]=(0,t.Yh)(e=>[e.formattedLegacyRewardData,e.userDataLoading]),{isConnected:s,address:a}=(0,o.m)(),{currentChainId:d}=(0,i.f)();return(0,l.a)({queryFn:e,queryKey:[n.i.LEGACY_USER_REWARDS,d,a,r],enabled:!!a&&s,refetchInterval:5e3,initialData:[]})}},71847:function(e,r,s){var l=s(80854),i=s(67294),t=s(17124),n=s(64163);r.Z=(e,r)=>{let s=e=>e.isWrappedBaseAsset?(0,t.QD)({symbol:r.baseAssetSymbol,underlyingAsset:l.hP.toLowerCase()}):{},{combinedAssets:o}=(0,i.useMemo)(()=>{let r=new Map;return(null==e?void 0:e.userReservesData)&&(e.userReservesData.filter(e=>{let{underlyingBalance:r}=e;return"0"!==r}).map(e=>{let l={...e,...e.reserve,...s(e.reserve)};return r.set(e.underlyingAsset,l),l}),e.userReservesData.reduce((e,l)=>{let{variableBorrows:i,stableBorrows:t,reserve:o}=l,a=i=>{let t={...l,borrowRateMode:i,...o,...s(o)},n=r.get(l.underlyingAsset);r.set(l.underlyingAsset,{...n,...t}),e.push(t)};return"0"!==i&&a(n.tk.Variable),"0"!==t&&a(n.tk.Stable),e},[])),{combinedAssets:Array.from(r.values())}},[e,r]);return{combinedAssets:o}}},19333:function(e,r,s){s.d(r,{Z:function(){return eB}});var l=s(85893),i=s(1279),t=s(48204),n=s(91516),o=s(18618),a=s(45161),d=s(34292),c=s(14225),x=s(55281),u=s(71293),m=s(57747),b=s(61557),h=s(10991),p=s(99840),y=s(80510),v=s(15115),j=s(7384),f=s(81625),w=s(92321),g=s(15459),k=s(78607),S=s(86200),D=s(96854),B=s(67294),I=s(68615),_=s(87040),A=e=>{let{title:r,info:s,data:i,loading:t}=e,n=(0,a.ff)("_Base Tooltip Icon","tooltip-trigger");return(0,l.jsxs)(d.U,{border:"1px",borderColor:(0,a.ff)("#00000010","#FFFFFF10"),bg:(0,a.ff)("white.9","grey.9"),borderRadius:"md",px:2,py:0,gap:1,children:[(0,l.jsx)(u.x,{fontSize:"sm",opacity:.5,children:r}),t?(0,l.jsx)(D.O,{height:"20px"}):(0,l.jsx)(m.xu,{fontSize:"sm",fontWeight:600,children:i}),s&&(0,l.jsx)(I.Z,{label:s||"info",children:(0,l.jsx)(_.$,{type:"other",cursor:"pointer",alt:"brand-icons",height:4,name:n})})]})},C=s(90851),F=e=>{let{title:r,info:s,data:i,loading:t,onClick:n,hover:o}=e;return(0,l.jsxs)(m.xu,{onClick:n,cursor:o?"pointer":"default",py:2,px:4,borderLeft:"1px",borderColor:(0,a.ff)("#00000010","#FFFFFF10"),children:[(0,l.jsx)(C.Z,{fontSize:"sm",infolabel:s,title:r,opacity:.5}),t?(0,l.jsx)(D.O,{height:"20px"}):(0,l.jsx)(m.xu,{fontSize:"md",children:i})]})},P=s(82730),U=s(17191),R=s(50151),N=s(22797),E=s(64325),W=s(74574),z=s(82509),T=s(94160),M=s(7316),Z=s(64163),Y=s(44394),L=s(82002),O=function(){let{isOpen:e,onOpen:r,onClose:s}=(0,P.q)(),{openEmodeModal:i}=(0,g.vR)(),t=(0,L.x)(),{currentMarket:n}=(0,k.f)(),{data:{user:o,eModes:d}}=(0,M.Z)(),x=0===o.userEmodeCategoryId,u=(0,a.ff)("white","black"),m=(0,a.ff)("black","white");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(U.J,{isOpen:e,onClose:s,placement:"bottom",closeOnBlur:!0,children:[(0,l.jsx)(R.x,{children:(0,l.jsx)(N.r,{id:"collaterization",isChecked:!x,onChange:r})}),(0,l.jsxs)(E.y,{color:m,bg:u,children:[(0,l.jsx)(W.Y,{fontWeight:"bold",border:"0",children:"Efficiency mode (E-mode)"}),(0,l.jsx)(z.b,{fontSize:"sm",fontWeight:500,sx:{textWrap:"wrap"},children:"E-mode increases your LTV for a selected category of assets up to 97%"}),(0,l.jsx)(T.D,{border:"0",display:"flex",alignItems:"center",justifyContent:"space-between",pb:4,children:x?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.z,{onClick:()=>{i(Z._h.ENABLE)},variant:"filled",children:"Enable E-mode"})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Y.Z,{variant:"outlined",onClick:()=>{i(Z._h.DISABLE)},"data-cy":"emode-disable",tracking_id:"open_e-mode_modal",tracking_params:{chainId:t,marketId:n,placement:"market_user_position_row"},children:"Disable E-Mode"})})})]})]})})};s(24209);var V=s(88862),K=s(50474),q=s(20020),H=s(66712),$=s(91170),G=s(1702),J=s(4040),Q=s(80972),X=s(49289),ee=s(5674),er=s(2322),es=s(3528),el=s(37848),ei=s(95372),et=s(31887),en=s(99733),eo=s(11163),ea=e=>{var r,s;let{item:i,marketId:t,apr:n}=e,{openLegacyBorrow:o,openLegacyRepay:b,openLegacySupply:h,openLegacyWithdraw:p,openCollateralChange:y}=(0,g.vR)(),[v]=(0,B.useState)(null),f=(0,eo.useRouter)(),D=(0,L.x)(),{currentMarket:I}=(0,k.f)(),[_,A]=(0,B.useState)(Z.tk.Variable),{isConnected:F}=(0,w.m)(),P=!i.isActive||i.isFrozen||0>=Number(i.walletBalance)||!F,U=i.isFrozen||!F,R=!i.isActive||!F,E=!i.isActive||!F,W=_===Z.tk.Stable?null==i?void 0:null===(r=i.reserve)||void 0===r?void 0:r.sIncentivesData:null==i?void 0:null===(s=i.reserve)||void 0===s?void 0:s.vIncentivesData;return(0,l.jsxs)(m.xu,{bg:(0,a.ff)("white.11","grey.11"),border:"1px",borderColor:(0,a.ff)("grey.3","white.5"),borderRadius:8,mb:4,p:4,children:[(0,l.jsxs)(d.U,{justifyContent:"space-between",maxW:"100%",mb:4,children:[(0,l.jsx)(er.Z,{symbol:null==i?void 0:i.reserve.iconSymbol,name:null==i?void 0:i.name,aprData:n}),(0,l.jsxs)(d.U,{borderColor:"white.4",children:[(0,l.jsx)(c.z,{size:{base:"sm",md:"md"},variant:"outline",onClick:()=>{(0,Y.k)("go_to_reserve_overview",{chainId:D,marketId:I,reserve:i.symbol,placement:"market_user_position_card"}),f.push("/reserve-overview?underlyingAsset=".concat(i.underlyingAsset,"&marketName=").concat(I))},children:"Details"}),(0,l.jsxs)(H.v,{children:[(0,l.jsx)($.j,{ref:v,size:{base:"sm",md:"md"},as:c.z,children:"Manage"}),(0,l.jsx)(G.h,{children:(0,l.jsxs)(J.q,{zIndex:999,children:[(0,l.jsx)(Q.s,{onClick:()=>{(0,Y.k)("open_borrow_modal",{chainId:D,marketId:I,reserve:i.symbol,placement:"market_user_position_card"}),o(i.underlyingAsset)},fontWeight:500,isDisabled:U,children:"Borrow More"}),(0,l.jsx)(Q.s,{onClick:()=>{(0,Y.k)("open_repay_modal",{chainId:D,marketId:I,reserve:i.symbol,placement:"market_user_position_card"}),b(i.underlyingAsset,i.borrowRateMode,i.isFrozen)},fontWeight:500,isDisabled:E,children:"Repay"}),(0,l.jsx)(Q.s,{onClick:()=>{(0,Y.k)("open_supply_modal",{chainId:D,marketId:I,reserve:i.symbol,placement:"market_user_position_card"}),h(i.underlyingAsset)},fontWeight:500,isDisabled:P,children:"Supply More"}),(0,l.jsx)(Q.s,{onClick:()=>{(0,Y.k)("open_withdraw_modal",{chainId:D,marketId:I,reserve:i.symbol,placement:"market_user_position_card"}),p(i.underlyingAsset)},fontWeight:500,isDisabled:R,children:"Withdraw"})]})})]})]})]}),(0,l.jsx)(X.i,{borderStyle:"dashed",mb:4}),(null==i?void 0:i.underlyingBalance)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"TOTAL SUPPLIED"}),(0,l.jsx)(m.xu,{children:(0,l.jsxs)(d.U,{gap:1,justifyContent:"flex-end",children:[(0,l.jsx)(j.B,{value:Number(null==i?void 0:i.underlyingBalance),visibleDecimals:2,compact:!0}),(0,l.jsx)(ei.Z,{value:Number((null==i?void 0:i.underlyingBalanceUSD)==="0"?"":null==i?void 0:i.underlyingBalanceUSD)})]})})]}),(i.borrowRateMode===Z.tk.Variable?i.variableBorrows:i.stableBorrows)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",mt:2,children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"TOTAL BORROWED"}),(0,l.jsx)(m.xu,{children:(0,l.jsxs)(d.U,{gap:1,justifyContent:"flex-end",children:[(0,l.jsx)(j.B,{value:Number(i.borrowRateMode===Z.tk.Variable?i.variableBorrows:i.stableBorrows)}),(0,l.jsx)(ei.Z,{value:Number(i.borrowRateMode===Z.tk.Variable?i.variableBorrowsUSD:i.stableBorrowsUSD)})]})})]}),(null==i?void 0:i.underlyingBalance)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",mt:2,children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"COLLATERAL USAGE"}),(0,l.jsxs)(x.K,{children:[(0,l.jsx)(N.r,{id:"collaterization",isChecked:i.usageAsCollateralEnabledOnUser,onChange:()=>{(0,Y.k)("open_collateral-usage_modal",{chainId:D,marketId:I,reserve:i.symbol,placement:"market_user_position_card"}),y(i.underlyingAsset)}}),(null==i?void 0:i.isIsolated)&&(0,l.jsx)(el.Z,{label:(0,l.jsx)(C.Z,{infolabel:(0,l.jsxs)(l.Fragment,{children:["Isolated assets have limited borrowing power and other assets cannot be used as collateral. ",(0,l.jsx)("br",{}),"Learn more in our ",(0,l.jsx)(es.Z,{href:"https://discord.gg",children:"Discord"})]}),title:"Isolated"}),level:"MODERATE"})]})]}),(0,l.jsx)(X.i,{borderStyle:"dashed",mt:4,mb:4}),(0,l.jsxs)(ee.M,{columns:2,children:[(0,l.jsxs)(x.K,{alignItems:"flex-start",justifyContent:"flex-start",children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"SUPPLY APY"}),(0,l.jsx)(m.xu,{children:(i.borrowRateMode===Z.tk.Variable?i.variableBorrows:i.stableBorrows)==="0"?"-":(0,l.jsxs)(x.K,{gap:1,alignItems:"flex-start",children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(S.b,{symbol:"%",children:(0,l.jsx)(j.B,{value:100*Number(i.reserve.supplyAPY),visibleDecimals:2,compact:!0})}),(0,l.jsx)(et.M,{incentives:null==i?void 0:i.aIncentivesData,symbol:null==i?void 0:i.iconSymbol})]}),(0,l.jsx)(en.Z,{symbol:i.symbol,marketId:t})]})})]}),(0,l.jsxs)(x.K,{alignItems:"flex-end",justifyContent:"flex-end",children:[(0,l.jsx)(u.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"BORROW APY"}),(0,l.jsx)(m.xu,{children:(i.borrowRateMode===Z.tk.Variable?i.variableBorrows:i.stableBorrows)==="0"?"-":(0,l.jsxs)(x.K,{gap:1,alignItems:"flex-end",children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(S.b,{symbol:"%",children:(0,l.jsx)(j.B,{value:100*Number(i.variableBorrowAPY),visibleDecimals:2,compact:!0})}),(0,l.jsx)(et.M,{incentives:W,symbol:i.symbol})]}),(0,l.jsx)(en.Z,{symbol:i.symbol,marketId:t,type:"borrow"})]})})]})]})]})},ed=s(64698),ec=s(89993),ex=s(85105),eu=s(93676),em=s(23694),eb=s(8371),eh=e=>{let{value:r,...s}=e;return(0,l.jsx)(eb.Vp,{size:"sm",variant:"solid",background:(0,a.ff)("grey.2","white.3"),w:"max-content",px:1,...s,children:(0,l.jsx)(j.B,{value:r,visibleDecimals:2,compact:!0})})},ep=e=>{var r,s,i;let{item:t,marketId:n,headers:u,apr:b}=e,{openLegacyBorrow:h,openLegacyRepay:p,openLegacySupply:v,openLegacyWithdraw:f,openCollateralChange:D}=(0,g.vR)(),[I]=(0,B.useState)(null),_=(0,eo.useRouter)(),{currentMarket:A}=(0,k.f)(),C=(0,L.x)(),F=(0,a.ff)("#FFF","black"),[P,U]=(0,B.useState)(Z.tk.Variable),{isConnected:R}=(0,w.m)(),[E]=(0,o.a)("(max-width: 740px)"),W=!t.isActive||t.isFrozen||0>=Number(t.walletBalance)||!R,z=t.isFrozen||!R||t.isIsolated,T=!t.isActive||!R,M=!t.isActive||!R,O=P===Z.tk.Stable?null==t?void 0:null===(r=t.reserve)||void 0===r?void 0:r.sIncentivesData:null==t?void 0:null===(s=t.reserve)||void 0===s?void 0:s.vIncentivesData,V=e=>{let r=null==u?void 0:u.find(r=>r.key===e);return(null==r?void 0:r.defaultShow)&&(null==r?void 0:r.show)};return(0,l.jsxs)(y.Tr,{children:[V("name")&&(0,l.jsx)(ed.Td,{onClick:()=>{(0,Y.k)("go_to_reserve_overview",{chainId:C,marketId:A,reserve:t.symbol,placement:"market_user_position_row"}),_.push("/reserve-overview?underlyingAsset=".concat(t.underlyingAsset,"&marketName=").concat(A))},children:(0,l.jsxs)(m.xu,{display:"flex",children:[(0,l.jsx)(er.Z,{symbol:t.iconSymbol,name:t.name,count:E?8:24,aprData:b}),(0,l.jsx)(ec.h,{"aria-label":"Menu Colapse",icon:(0,l.jsx)(ex.X,{w:4,h:4,color:(0,a.ff)("grey.5","white.7"),ml:1}),variant:"normal",onClick:()=>""})]})}),V("status")&&!1,V("underlyingBalanceUSD")&&(0,l.jsx)(ed.Td,{color:"white.9",children:(null==t?void 0:t.underlyingBalance)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(S.b,{symbol:"USD",children:(0,l.jsx)(j.B,{value:Number((null==t?void 0:t.underlyingBalanceUSD)==="0"?"":null==t?void 0:t.underlyingBalanceUSD),visibleDecimals:2,compact:!0,fontWeight:600})}),(0,l.jsx)(eh,{value:Number(null==t?void 0:t.underlyingBalance)})]})}),V("variableBorrowsUSD")&&(0,l.jsx)(ed.Td,{color:"white.9",children:(t.borrowRateMode===Z.tk.Variable?t.variableBorrows:t.stableBorrows)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(S.b,{symbol:"USD",children:(0,l.jsx)(j.B,{value:Number(t.borrowRateMode===Z.tk.Variable?t.variableBorrowsUSD:t.stableBorrowsUSD),visibleDecimals:2,compact:!0,fontWeight:600})}),(0,l.jsx)(eh,{value:Number(t.borrowRateMode===Z.tk.Variable?t.variableBorrows:t.stableBorrows)})]})}),V("sumSupplyAPY")&&(0,l.jsx)(ed.Td,{color:"white.9",children:(null==t?void 0:t.underlyingBalance)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(d.U,{mb:1,children:(0,l.jsx)(em.Z,{aIncentivesData:null!==(i=t.aIncentivesData)&&void 0!==i?i:[],symbol:t.iconSymbol,supplyApy:t.reserve.supplyAPY})}),(0,l.jsx)(en.Z,{symbol:t.symbol,marketId:n})]})}),V("interestEarned")&&(0,l.jsx)(ed.Td,{color:"white.9",children:(null==t?void 0:t.interestEarned)===0?"":(0,l.jsx)(x.K,{gap:1,children:(0,l.jsx)(S.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(S.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(j.B,{value:Number((null==t?void 0:t.interestEarned)===0?"":null==t?void 0:t.interestEarned),visibleDecimals:2,compact:!0})})})})}),V("sumBorrowAPY")&&(0,l.jsx)(ed.Td,{color:"white.9",children:(null==t?void 0:t.variableBorrowsUSD)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(d.U,{children:(0,l.jsx)(eu.Z,{aIncentivesData:null!=O?O:[],symbol:t.symbol,borrowApy:t.variableBorrowAPY})}),(0,l.jsx)(en.Z,{symbol:t.symbol,marketId:n,type:"borrow"})]})}),V("interestPaid")&&(0,l.jsx)(ed.Td,{color:"white.9",children:(null==t?void 0:t.interestPaid)===0?"":(0,l.jsx)(x.K,{gap:1,children:(0,l.jsx)(S.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(S.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(j.B,{value:Number((null==t?void 0:t.interestPaid)===0?"":-((null==t?void 0:t.interestPaid)*1)),visibleDecimals:2,compact:!0})})})})}),(0,l.jsx)(ed.Td,{color:"white.9",children:(0,l.jsx)(x.K,{children:(0,l.jsx)(N.r,{id:"collaterization",isChecked:t.usageAsCollateralEnabledOnUser,onChange:()=>{(0,Y.k)("open_collateral-usage_modal",{chainId:C,marketId:A,reserve:t.symbol,placement:"market_user_position_row"}),D(t.underlyingAsset)}})})}),V("action")&&(0,l.jsx)(ed.Td,{position:"sticky",borderColor:"white.4",zIndex:1,right:"0px",bg:F,w:"10%",p:"0 !important",children:(0,l.jsx)(m.xu,{p:{base:3,md:4},borderColor:"white.4",borderLeft:"1px solid #FFFFFF33",children:(0,l.jsxs)(H.v,{children:[(0,l.jsx)($.j,{ref:I,size:{base:"xs",md:"sm"},as:c.z,children:"Manage"}),(0,l.jsx)(G.h,{children:(0,l.jsxs)(J.q,{zIndex:999,children:[(0,l.jsx)(Q.s,{onClick:()=>{(0,Y.k)("open_borrow_modal",{chainId:C,marketId:A,reserve:t.symbol,placement:"market_user_position_row"}),h(t.underlyingAsset)},fontWeight:500,isDisabled:z,children:"Borrow"}),(0,l.jsx)(Q.s,{onClick:()=>{(0,Y.k)("open_repay_modal",{chainId:C,marketId:A,reserve:t.symbol,placement:"market_user_position_row"}),p(t.underlyingAsset,t.borrowRateMode,t.isFrozen)},fontWeight:500,isDisabled:M,children:"Repay"}),(0,l.jsx)(Q.s,{onClick:()=>{(0,Y.k)("open_supply_modal",{chainId:C,marketId:A,reserve:t.symbol,placement:"market_user_position_row"}),v(t.underlyingAsset)},fontWeight:500,isDisabled:W,children:"Supply"}),(0,l.jsx)(Q.s,{onClick:()=>{(0,Y.k)("open_withdraw_modal",{chainId:C,marketId:A,reserve:t.symbol,placement:"market_user_position_row"}),f(t.underlyingAsset)},fontWeight:500,isDisabled:T,children:"Withdraw"})]})})]})})})]})},ey=s(91489),ev=s(61514),ej=s(78188),ef=s(71847),ew=s(80854),eg=s(91173),ek=s(79446),eS=s(33168);let eD=[{key:"name",name:"Asset",defaultShow:!0,show:!0,disable:!0},{key:"status",name:"Status",defaultShow:!1,show:!1,disable:!0},{key:"underlyingBalanceUSD",name:"Supplied",defaultShow:!0,show:!0,disable:!1},{key:"variableBorrowsUSD",name:"Borrowed",defaultShow:!0,show:!0,disable:!1},{key:"sumSupplyAPY",name:"Supply APY",defaultShow:!0,show:!0,disable:!1},{key:"interestEarned",name:"Interest Earned",defaultShow:!0,show:!0,disable:!1},{key:"sumBorrowAPY",name:"Borrow APY",defaultShow:!0,show:!0,disable:!1},{key:"interestPaid",name:"Interest Paid",defaultShow:!0,show:!0,disable:!1},{key:"usageAsCollateralEnabledOnUser",name:"Collateral",defaultShow:!0,show:!0,disable:!1},{key:"action",name:"Action",defaultShow:!0,show:!0,disable:!1}];var eB=()=>{let{currentMarket:e,currentChainId:r,currentMarketData:s,currentNetworkConfig:D}=(0,k.f)(),I=(0,ev.ZP)(),[_]=(0,o.a)("(min-width: 500px)"),{openClaimRewards:C,openHFModal:P}=(0,g.vR)(),{address:U}=(0,w.m)(),{walletBalances:R}=(0,eg.P)(),{data:N}=(0,ek.Z)(),{data:{user:E,reserves:W,loading:z}}=(0,M.Z)(),{combinedAssets:T}=(0,ef.Z)(E,D),Y=s.v3&&Object.keys((0,eS.YN)(W)).length>1,L=(0,a.ff)("#FFFFFF","black"),H=(0,a.ff)("grey.10","white.10"),[$,G]=B.useState(!0),[J,Q]=B.useState(Z.tk.Variable),X=T.map(e=>{var r,s;return{...e,walletBalance:e.isWrappedBaseAsset?null===(r=R[ew.hP.toLowerCase()])||void 0===r?void 0:r.amount:null===(s=R[e.underlyingAsset])||void 0===s?void 0:s.amount}}),ee=N.find(e=>e.marketName===s.marketTitle),er=ee?ee.data.rewardToken:"0",es=ee?ee.data.rewardUSD:0,el=(0,B.useMemo)(()=>X.map(e=>{var r,l,i;let t=J===Z.tk.Stable?null==e?void 0:null===(r=e.reserve)||void 0===r?void 0:r.sIncentivesData:null==e?void 0:null===(l=e.reserve)||void 0===l?void 0:l.vIncentivesData,{incentivesNetAPR:n}=(0,ej.Or)(null!==(i=e.aIncentivesData)&&void 0!==i?i:[],s),{incentivesNetAPR:o}=(0,ej.Or)(null!=t?t:[],s);return{...e,interestEarned:Number(e.underlyingBalanceUSD)*Number(e.supplyAPY),interestPaid:Number(e.variableBorrowsUSD)*Number(e.variableBorrowAPY),sumSupplyAPY:Number(e.reserve.supplyAPY)+Number(n),sumBorrowAPY:-Number(e.variableBorrowAPY)+Number(o)}}),[X]),[ei,et]=B.useState(eD),[en,eo]=B.useState(null),ed=e=>{var r;let s=null===(r=eD.find(r=>r.key===e))||void 0===r?void 0:r.key;if(s)eo({key:s,direction:en?"asc"===en.direction?"desc":"desc"===en.direction?"neutral":"asc":"asc"})},ec=(0,B.useMemo)(()=>en&&"neutral"!==en.direction?(0,f.d)(el,null==en?void 0:en.key,null==en?void 0:en.direction):el,[el,en]),ex=(0,i.hE)((null==E?void 0:E.totalBorrowsMarketReferenceCurrency)||"0").plus((null==E?void 0:E.availableBorrowsMarketReferenceCurrency)||"0"),eu=ex.eq(0)?"0":(0,i.hE)((null==E?void 0:E.totalBorrowsMarketReferenceCurrency)||"0").div(ex).toFixed(),em=(null==E?void 0:E.totalCollateralMarketReferenceCurrency)==="0"?"0":(0,i.hE)((null==E?void 0:E.totalBorrowsMarketReferenceCurrency)||"0").dividedBy((null==E?void 0:E.totalCollateralMarketReferenceCurrency)||"1").toFixed(),eb=()=>ec.reduce((e,r)=>e+(r.interestEarned||0),0),eh=()=>ec.reduce((e,r)=>e+(r.interestPaid||0),0);function eB(e){return(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(F,{title:"Net Worth",data:(0,l.jsx)(S.b,{symbol:"USD",children:(0,l.jsx)(j.B,{value:(null==e?void 0:e.netWorthUSD)||0,visibleDecimals:2})}),loading:z}),(0,l.jsx)(F,{title:"Net APY",data:(0,l.jsx)(S.b,{symbol:"%",children:(0,l.jsx)(V.Z,{value:100*e.netAPY||0})}),loading:z}),(0,l.jsx)(F,{title:"Net Interest",data:(0,l.jsx)(S.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(S.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(j.B,{value:Number(eb()-eh()),visibleDecimals:2,compact:!0})})}),loading:z}),(0,l.jsx)(F,{title:"Health Factor",data:(0,l.jsxs)(d.U,{children:[(0,l.jsx)(K.Z,{value:null==e?void 0:e.healthFactor}),(0,l.jsx)(c.z,{variant:"outline",size:"xs",onClick:()=>P(e.healthFactor,em,e.currentLoanToValue,e.currentLiquidationThreshold),children:"Details"})]}),loading:z,hover:!0}),(0,l.jsx)(F,{title:"Available Rewards",data:(0,l.jsxs)(d.U,{children:[(0,l.jsx)(S.b,{symbol:"USD",children:(0,l.jsx)(j.B,{value:es||0,visibleDecimals:2})}),es>0&&(0,l.jsx)(c.z,{variant:"ghost",size:"xs",onClick:()=>C(er,r),children:"Claim"})]}),loading:z})]})}return void 0===U||0===U.length?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(l.Fragment,{children:0===X.length?null:(0,l.jsx)(m.xu,{mb:4,children:z?(0,l.jsx)(q.Z,{}):(0,l.jsxs)(m.xu,{children:[$&&!1,(0,l.jsxs)(m.xu,{bg:(0,a.ff)("#FFFFFF","transparent"),border:"1px",overflow:"hidden",borderRadius:"12px",borderBottom:$?0:"1px",borderBottomRadius:$?0:"12px",pb:$?3:0,mb:$?-3:0,borderColor:(0,a.ff)("grey.3","white.5"),children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(d.U,{flex:1,alignItems:"center",justifyContent:"left",children:(0,l.jsx)(u.x,{fontSize:"md",opacity:.5,color:H,pl:4,children:"Your Position"})}),(0,l.jsxs)(d.U,{children:[_&&eB(E),(0,l.jsx)(d.U,{px:4,py:5,bg:"white.3",height:"100%",onClick:()=>G(!$),cursor:"pointer",children:$?(0,l.jsx)(n.g,{fontSize:24}):(0,l.jsx)(t.v,{fontSize:24})})]})]}),!_&&$&&eB(E),$&&(0,l.jsxs)(d.U,{borderTop:"1px",borderTopColor:(0,a.ff)("#00000010","#FFFFFF10"),flexDir:{base:"column",md:"row"},gap:{base:0,md:1},alignItems:{base:"flex-start",md:"center"},children:[(0,l.jsxs)(x.K,{gap:0,flex:{base:1,md:.5},p:3,children:[(0,l.jsx)(u.x,{fontSize:"sm",opacity:.5,color:H,pl:1,mb:1,children:"Supply data"}),(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(A,{title:"Balance:",data:(0,l.jsx)(S.b,{symbol:"USD",children:(0,l.jsx)(j.B,{value:(null==E?void 0:E.totalLiquidityUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"APY:",data:(0,l.jsx)(S.b,{symbol:"%",children:(0,l.jsx)(j.B,{value:(null==E?void 0:E.earnedAPY)*100||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"Collateral:",data:(0,l.jsx)(S.b,{symbol:"USD",children:(0,l.jsx)(j.B,{value:(null==E?void 0:E.totalCollateralUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"Interest:",data:(0,l.jsx)(S.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(S.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(j.B,{value:Number(eb()),visibleDecimals:2,compact:!0})})})})]})]}),(0,l.jsxs)(x.K,{gap:0,borderLeft:{base:0,md:"1px"},borderTop:{base:"1px",md:"0"},flex:{base:1,md:.5},borderColor:"#FFFFFF10 !important",p:3,children:[(0,l.jsx)(u.x,{fontSize:"sm",opacity:.5,color:H,pl:1,mb:1,children:"Borrow data"}),(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(A,{title:"Balance:",data:(0,l.jsx)(S.b,{symbol:"USD",children:(0,l.jsx)(j.B,{value:(null==E?void 0:E.totalBorrowsUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"APY:",data:(0,l.jsx)(S.b,{symbol:"%",children:(0,l.jsx)(j.B,{value:(null==E?void 0:E.debtAPY)*100||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"Power Used:",data:(0,l.jsx)(S.b,{symbol:"%",children:(0,l.jsx)(j.B,{value:eu||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"Interest:",data:(0,l.jsx)(S.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(S.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(j.B,{value:Number(eh()),visibleDecimals:2,compact:!0})})})}),Y&&(0,l.jsx)(A,{title:"E-Mode:",data:(0,l.jsx)(O,{})})]})]})]})]}),$&&_&&(0,l.jsx)(b.x,{mx:"auto",sx:{border:"1px",borderRadius:"12px",borderColor:(0,a.ff)("grey.3","white.5"),bgColor:(0,a.ff)("#FFFFFF","transparent"),padding:"0px",margin:"0px"},w:"100%",children:(0,l.jsxs)(h.i,{variant:"unstyled",bg:L,border:"none",children:[(0,l.jsx)(p.h,{children:(0,l.jsx)(y.Tr,{children:eD.map((e,r)=>(0,l.jsx)(ey.Z,{sticky:(null==eD?void 0:eD.length)-1===r?"right":void 0,onClick:()=>ed(e.key),sortDirection:(null==en?void 0:en.key)===e.key?null==en?void 0:en.direction:void 0,show:e.show,children:(0,l.jsx)(u.x,{children:e.name})},e.key))})}),(0,l.jsx)(v.p,{children:null==ec?void 0:ec.map((r,s)=>(0,l.jsx)(ep,{item:r,marketId:e,headers:ei,apr:I},s))})]})}),!_&&(0,l.jsx)(m.xu,{mt:$?0:4,children:ec.map((r,s)=>(0,l.jsx)(ea,{item:r,marketId:e,apr:I},s))})]})})})}}}]);