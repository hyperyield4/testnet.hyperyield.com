"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4064],{95372:function(e,r,s){var l=s(85893),t=s(86200),i=s(7384),n=s(8371),o=s(45161);s(67294),r.Z=e=>{let{value:r,...s}=e;return(0,l.jsx)(n.Vp,{size:"sm",variant:"solid",background:(0,o.ff)("grey.2","white.3"),w:"max-content",px:1,...s,children:(0,l.jsx)(t.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(i.B,{value:r,visibleDecimals:2,compact:!0})})})}},74666:function(e,r,s){var l=s(85893),t=s(45161),i=s(57747),n=s(96854);s(67294);var o=s(90851);r.Z=e=>{let{title:r,value:s,size:a,infoLabel:d,wfull:c=!1,woContainer:x}=e,m=(0,t.ff)("grey.7","white.7"),u=(0,t.ff)("#fff","white.1"),b=(0,t.ff)("grey.2","white.4"),h="lg"===a;return(0,l.jsxs)(i.xu,{width:{base:"100%",md:c?"100%":"max-content"},bg:x?"none":u,border:x?"none":"1px",borderColor:b,borderRadius:h?12:8,py:{base:2,md:h?4:2},px:{base:h?4:3,md:h?6:3},pe:x?{base:h?4:2,md:h?6:2}:{base:h?6:8,md:8},children:[(0,l.jsx)(o.Z,{textStyle:{base:"sm",md:h?"base":"sm"},mb:{base:0,md:h?1:0},fontWeight:h?500:400,color:m,w:"max-content",title:r,infolabel:d}),(0,l.jsx)(i.xu,{textStyle:{base:"xl",md:h?"3xl":"xl"},fontWeight:h?500:600,children:e.loading?(0,l.jsx)(n.O,{height:"30px",w:"24"}):s})]})}},88862:function(e,r,s){var l=s(85893),t=s(45161),i=s(7384);r.Z=e=>{let{value:r,isBorrowAPY:s,...n}=e,o="";return o=s?"yellow.5":Number(r)>0?"green.11":0>Number(r)?"red.5":(0,t.ff)("grey.8","white.11"),(0,l.jsx)(i.B,{visibleDecimals:2,color:o,value:r,fontWeight:"bold",...n})}},31887:function(e,r,s){s.d(r,{M:function(){return h}});var l=s(85893),t=s(1279),i=s(57747),n=s(71293),o=s(45161),a=s(34292),d=s(67294),c=s(87040),x=s(7384),m=s(78607),u=s(86200);let b=()=>(0,l.jsx)(i.xu,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,l.jsx)(n.x,{children:"\xa0"})}),h=e=>{let{incentives:r,displayBlank:s,showPer:h=!0}=e,[j,p]=(0,d.useState)(!1),{currentMarketData:y}=(0,m.f)(),v=(0,d.useMemo)(()=>(null==r?void 0:r.filter(e=>y.whiteListedIncentives.includes(e.rewardTokenSymbol.toLowerCase())))||r,[r]);if(!(v&&v.length>0))return s?(0,l.jsx)(b,{}):null;let f=v.some(e=>"Infinity"===e.incentiveAPR),g=f?"Infinity":v.reduce((e,r)=>e+ +r.incentiveAPR,0),w=f?"Infinity":"Infinity"!==g?(0,t.hE)(g||0).toNumber():"Infinity";return 0===w?s?(0,l.jsx)(b,{}):null:(0,l.jsx)(i.xu,{px:1,borderRadius:"md",cursor:"pointer",onClick:()=>{p(j)},border:"0.5px solid",borderColor:(0,o.ff)("grey.3","white.5"),children:(0,l.jsxs)(a.U,{gap:0,children:[(0,l.jsx)(i.xu,{sx:{display:"inline-flex"},children:(0,l.jsx)(i.xu,{w:"12px",h:"12px",children:v.length<5?(0,l.jsx)(l.Fragment,{children:v.filter(e=>"WETH"!==e.rewardTokenSymbol).map(e=>(0,l.jsx)(c.$,{type:"tokens",name:e.rewardTokenSymbol.toLowerCase(),width:"12px",height:"12px"},e.rewardTokenSymbol))}):(0,l.jsx)(l.Fragment,{children:v.slice(0,3).filter(e=>"WETH"!==e.rewardTokenSymbol).map(e=>(0,l.jsx)(c.$,{type:"tokens",name:e.rewardTokenSymbol.toLowerCase(),width:"12px",height:"12px"},e.rewardTokenSymbol))})})}),(0,l.jsx)(i.xu,{display:h?"block":"none",sx:{ml:1},children:(0,l.jsx)(u.b,{symbol:"%",fontSize:"xs",children:"Infinity"!==w?(0,l.jsx)(x.B,{value:(100*w).toFixed(2),compact:!0,visibleDecimals:2}):"Infinity"===w?(0,l.jsx)(n.x,{children:"âˆž"}):void 0})})]})})}},79446:function(e,r,s){var l=s(10777),t=s(78607),i=s(19152),n=s(42620),o=s(92321);r.Z=()=>{let[e,r]=(0,i.Yh)(e=>[e.formattedLegacyRewardData,e.userDataLoading]),{isConnected:s,address:a}=(0,o.m)(),{currentChainId:d}=(0,t.f)();return(0,l.a)({queryFn:e,queryKey:[n.i.LEGACY_USER_REWARDS,d,a,r],enabled:!!a&&s,refetchInterval:5e3,initialData:[]})}},71847:function(e,r,s){var l=s(80854),t=s(67294),i=s(17124),n=s(64163);r.Z=(e,r)=>{let s=e=>e.isWrappedBaseAsset?(0,i.QD)({symbol:r.baseAssetSymbol,underlyingAsset:l.hP.toLowerCase()}):{},{combinedAssets:o}=(0,t.useMemo)(()=>{let r=new Map;return(null==e?void 0:e.userReservesData)&&(e.userReservesData.filter(e=>{let{underlyingBalance:r}=e;return"0"!==r}).map(e=>{let l={...e,...e.reserve,...s(e.reserve)};return r.set(e.underlyingAsset,l),l}),e.userReservesData.reduce((e,l)=>{let{variableBorrows:t,stableBorrows:i,reserve:o}=l,a=t=>{let i={...l,borrowRateMode:t,...o,...s(o)},n=r.get(l.underlyingAsset);r.set(l.underlyingAsset,{...n,...i}),e.push(i)};return"0"!==t&&a(n.tk.Variable),"0"!==i&&a(n.tk.Stable),e},[])),{combinedAssets:Array.from(r.values())}},[e,r]);return{combinedAssets:o}}},19333:function(e,r,s){s.d(r,{Z:function(){return eA}});var l=s(85893),t=s(1279),i=s(48204),n=s(91516),o=s(18618),a=s(45161),d=s(34292),c=s(14225),x=s(55281),m=s(71293),u=s(96854),b=s(57747),h=s(61557),j=s(10991),p=s(99840),y=s(80510),v=s(15115),f=s(7384),g=s(81625),w=s(92321),k=s(15459),S=s(78607),D=s(86200),B=s(67294),I=s(68615),C=s(87040),A=e=>{let{title:r,info:s,data:t,loading:i}=e,n=(0,a.ff)("_Base Tooltip Icon","tooltip-trigger");return(0,l.jsxs)(d.U,{border:"1px",borderColor:(0,a.ff)("#00000010","#FFFFFF10"),bg:(0,a.ff)("white.9","grey.9"),borderRadius:"md",px:2,py:0,gap:1,children:[(0,l.jsx)(m.x,{fontSize:"sm",opacity:.5,children:r}),i?(0,l.jsx)(u.O,{height:"20px"}):(0,l.jsx)(b.xu,{fontSize:"sm",fontWeight:600,children:t}),s&&(0,l.jsx)(I.Z,{label:s||"info",children:(0,l.jsx)(C.$,{type:"other",cursor:"pointer",alt:"brand-icons",height:4,name:n})})]})},_=s(90851),F=e=>{let{title:r,info:s,data:t,loading:i,onClick:n,hover:o}=e;return(0,l.jsxs)(b.xu,{onClick:n,cursor:o?"pointer":"default",py:2,px:4,borderLeft:"1px",borderColor:(0,a.ff)("#00000010","#FFFFFF10"),children:[(0,l.jsx)(_.Z,{fontSize:"sm",infolabel:s,title:r,opacity:.5}),i?(0,l.jsx)(u.O,{height:"20px"}):(0,l.jsx)(b.xu,{fontSize:"md",children:t})]})},P=s(82730),U=s(17191),R=s(50151),E=s(22797),N=s(64325),W=s(74574),Z=s(82509),T=s(94160),z=s(7316),M=s(64163),Y=s(44394),L=s(82002),O=function(){let{isOpen:e,onOpen:r,onClose:s}=(0,P.q)(),{openEmodeModal:t}=(0,k.vR)(),i=(0,L.x)(),{currentMarket:n}=(0,S.f)(),{data:{user:o,eModes:d}}=(0,z.Z)(),x=0===o.userEmodeCategoryId,m=(0,a.ff)("white","black"),u=(0,a.ff)("black","white");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(U.J,{isOpen:e,onClose:s,placement:"bottom",closeOnBlur:!0,children:[(0,l.jsx)(R.x,{children:(0,l.jsx)(E.r,{id:"collaterization",isChecked:!x,onChange:r})}),(0,l.jsxs)(N.y,{color:u,bg:m,children:[(0,l.jsx)(W.Y,{fontWeight:"bold",border:"0",children:"Efficiency mode (E-mode)"}),(0,l.jsx)(Z.b,{fontSize:"sm",fontWeight:500,sx:{textWrap:"wrap"},children:"E-mode increases your LTV for a selected category of assets up to 97%"}),(0,l.jsx)(T.D,{border:"0",display:"flex",alignItems:"center",justifyContent:"space-between",pb:4,children:x?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.z,{onClick:()=>{t(M._h.ENABLE)},variant:"filled",children:"Enable E-mode"})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Y.Z,{variant:"outlined",onClick:()=>{t(M._h.DISABLE)},"data-cy":"emode-disable",tracking_id:"open_e-mode_modal",tracking_params:{chainId:i,marketId:n,placement:"market_user_position_row"},children:"Disable E-Mode"})})})]})]})})},K=s(24209),V=s(88862),q=s(50474),H=s(20020),$=s(66712),G=s(91170),J=s(1702),Q=s(4040),X=s(80972),ee=s(49289),er=s(5674),es=s(2322),el=s(3528),et=s(37848),ei=s(95372),en=s(31887),eo=s(99733),ea=s(11163),ed=e=>{var r,s;let{item:t,marketId:i,apr:n}=e,{openLegacyBorrow:o,openLegacyRepay:u,openLegacySupply:h,openLegacyWithdraw:j,openCollateralChange:p}=(0,k.vR)(),[y]=(0,B.useState)(null),v=(0,ea.useRouter)(),g=(0,L.x)(),{currentMarket:I}=(0,S.f)(),[C,A]=(0,B.useState)(M.tk.Variable),{isConnected:F}=(0,w.m)(),P=!t.isActive||t.isFrozen||0>=Number(t.walletBalance)||!F,U=t.isFrozen||!F,R=!t.isActive||!F,N=!t.isActive||!F,W=C===M.tk.Stable?null==t?void 0:null===(r=t.reserve)||void 0===r?void 0:r.sIncentivesData:null==t?void 0:null===(s=t.reserve)||void 0===s?void 0:s.vIncentivesData;return(0,l.jsxs)(b.xu,{bg:(0,a.ff)("white.11","grey.11"),border:"1px",borderColor:(0,a.ff)("grey.3","white.5"),borderRadius:8,mb:4,p:4,children:[(0,l.jsxs)(d.U,{justifyContent:"space-between",maxW:"100%",mb:4,children:[(0,l.jsx)(es.Z,{symbol:null==t?void 0:t.reserve.iconSymbol,name:null==t?void 0:t.name,aprData:n}),(0,l.jsxs)(d.U,{borderColor:"white.4",children:[(0,l.jsx)(c.z,{size:{base:"sm",md:"md"},variant:"outline",onClick:()=>{(0,Y.k)("go_to_reserve_overview",{chainId:g,marketId:I,reserve:t.symbol,placement:"market_user_position_card"}),v.push("/reserve-overview?underlyingAsset=".concat(t.underlyingAsset,"&marketName=").concat(I))},children:"Details"}),(0,l.jsxs)($.v,{children:[(0,l.jsx)(G.j,{ref:y,size:{base:"sm",md:"md"},as:c.z,children:"Manage"}),(0,l.jsx)(J.h,{children:(0,l.jsxs)(Q.q,{zIndex:999,children:[(0,l.jsx)(X.s,{onClick:()=>{(0,Y.k)("open_borrow_modal",{chainId:g,marketId:I,reserve:t.symbol,placement:"market_user_position_card"}),o(t.underlyingAsset)},fontWeight:500,isDisabled:U,children:"Borrow More"}),(0,l.jsx)(X.s,{onClick:()=>{(0,Y.k)("open_repay_modal",{chainId:g,marketId:I,reserve:t.symbol,placement:"market_user_position_card"}),u(t.underlyingAsset,t.borrowRateMode,t.isFrozen)},fontWeight:500,isDisabled:N,children:"Repay"}),(0,l.jsx)(X.s,{onClick:()=>{(0,Y.k)("open_supply_modal",{chainId:g,marketId:I,reserve:t.symbol,placement:"market_user_position_card"}),h(t.underlyingAsset)},fontWeight:500,isDisabled:P,children:"Supply More"}),(0,l.jsx)(X.s,{onClick:()=>{(0,Y.k)("open_withdraw_modal",{chainId:g,marketId:I,reserve:t.symbol,placement:"market_user_position_card"}),j(t.underlyingAsset)},fontWeight:500,isDisabled:R,children:"Withdraw"})]})})]})]})]}),(0,l.jsx)(ee.i,{borderStyle:"dashed",mb:4}),(null==t?void 0:t.underlyingBalance)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"TOTAL SUPPLIED"}),(0,l.jsx)(b.xu,{children:(0,l.jsxs)(d.U,{gap:1,justifyContent:"flex-end",children:[(0,l.jsx)(f.B,{value:Number(null==t?void 0:t.underlyingBalance),visibleDecimals:2,compact:!0}),(0,l.jsx)(ei.Z,{value:Number((null==t?void 0:t.underlyingBalanceUSD)==="0"?"":null==t?void 0:t.underlyingBalanceUSD)})]})})]}),(t.borrowRateMode===M.tk.Variable?t.variableBorrows:t.stableBorrows)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",mt:2,children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"TOTAL BORROWED"}),(0,l.jsx)(b.xu,{children:(0,l.jsxs)(d.U,{gap:1,justifyContent:"flex-end",children:[(0,l.jsx)(f.B,{value:Number(t.borrowRateMode===M.tk.Variable?t.variableBorrows:t.stableBorrows)}),(0,l.jsx)(ei.Z,{value:Number(t.borrowRateMode===M.tk.Variable?t.variableBorrowsUSD:t.stableBorrowsUSD)})]})})]}),(null==t?void 0:t.underlyingBalance)==="0"?(0,l.jsx)(l.Fragment,{}):(0,l.jsxs)(d.U,{alignItems:"baseline",justifyContent:"space-between",mt:2,children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"COLLATERAL USAGE"}),(0,l.jsxs)(x.K,{children:[(0,l.jsx)(E.r,{id:"collaterization",isChecked:t.usageAsCollateralEnabledOnUser,onChange:()=>{(0,Y.k)("open_collateral-usage_modal",{chainId:g,marketId:I,reserve:t.symbol,placement:"market_user_position_card"}),p(t.underlyingAsset)}}),(null==t?void 0:t.isIsolated)&&(0,l.jsx)(et.Z,{label:(0,l.jsx)(_.Z,{infolabel:(0,l.jsxs)(l.Fragment,{children:["Isolated assets have limited borrowing power and other assets cannot be used as collateral. ",(0,l.jsx)("br",{}),"Learn more in our ",(0,l.jsx)(el.Z,{href:"https://discord.gg",children:"Discord"})]}),title:"Isolated"}),level:"MODERATE"})]})]}),(0,l.jsx)(ee.i,{borderStyle:"dashed",mt:4,mb:4}),(0,l.jsxs)(er.M,{columns:2,children:[(0,l.jsxs)(x.K,{alignItems:"flex-start",justifyContent:"flex-start",children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"SUPPLY APY"}),(0,l.jsx)(b.xu,{children:(t.borrowRateMode===M.tk.Variable?t.variableBorrows:t.stableBorrows)==="0"?"-":(0,l.jsxs)(x.K,{gap:1,alignItems:"flex-start",children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(D.b,{symbol:"%",children:(0,l.jsx)(f.B,{value:100*Number(t.reserve.supplyAPY),visibleDecimals:2,compact:!0})}),(0,l.jsx)(en.M,{incentives:null==t?void 0:t.aIncentivesData,symbol:null==t?void 0:t.iconSymbol})]}),(0,l.jsx)(eo.Z,{symbol:t.symbol,marketId:i})]})})]}),(0,l.jsxs)(x.K,{alignItems:"flex-end",justifyContent:"flex-end",children:[(0,l.jsx)(m.x,{textStyle:"sm",fontWeight:500,opacity:.6,children:"BORROW APY"}),(0,l.jsx)(b.xu,{children:(t.borrowRateMode===M.tk.Variable?t.variableBorrows:t.stableBorrows)==="0"?"-":(0,l.jsxs)(x.K,{gap:1,alignItems:"flex-end",children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(D.b,{symbol:"%",children:(0,l.jsx)(f.B,{value:100*Number(t.variableBorrowAPY),visibleDecimals:2,compact:!0})}),(0,l.jsx)(en.M,{incentives:W,symbol:t.symbol})]}),(0,l.jsx)(eo.Z,{symbol:t.symbol,marketId:i,type:"borrow"})]})})]})]})]})},ec=s(64698),ex=s(89993),em=s(85105),eu=s(86115),eb=s(93676),eh=s(23694),ej=s(8371),ep=e=>{let{value:r,...s}=e;return(0,l.jsx)(ej.Vp,{size:"sm",variant:"solid",background:(0,a.ff)("grey.2","white.3"),w:"max-content",px:1,...s,children:(0,l.jsx)(f.B,{value:r,visibleDecimals:2,compact:!0})})},ey=e=>{var r,s,t;let{item:i,marketId:n,headers:u,apr:h}=e,{openLegacyBorrow:j,openLegacyRepay:p,openLegacySupply:v,openLegacyWithdraw:g,openCollateralChange:I}=(0,k.vR)(),[C]=(0,B.useState)(null),A=(0,ea.useRouter)(),{currentMarket:F}=(0,S.f)(),P=(0,L.x)(),U=(0,a.ff)("#FFF","black"),[R,N]=(0,B.useState)(M.tk.Variable),{isConnected:W}=(0,w.m)(),[Z]=(0,o.a)("(max-width: 740px)"),T=!i.isActive||i.isFrozen||0>=Number(i.walletBalance)||!W,z=i.isFrozen||!W||i.isIsolated,O=!i.isActive||!W,K=!i.isActive||!W,V=R===M.tk.Stable?null==i?void 0:null===(r=i.reserve)||void 0===r?void 0:r.sIncentivesData:null==i?void 0:null===(s=i.reserve)||void 0===s?void 0:s.vIncentivesData,q=e=>{let r=null==u?void 0:u.find(r=>r.key===e);return null==r?void 0:r.show};return(0,l.jsxs)(y.Tr,{children:[q("name")&&(0,l.jsx)(ec.Td,{onClick:()=>{(0,Y.k)("go_to_reserve_overview",{chainId:P,marketId:F,reserve:i.symbol,placement:"market_user_position_row"}),A.push("/reserve-overview?underlyingAsset=".concat(i.underlyingAsset,"&marketName=").concat(F))},children:(0,l.jsxs)(b.xu,{display:"flex",children:[(0,l.jsx)(es.Z,{symbol:i.iconSymbol,name:i.name,count:Z?8:24,aprData:h}),(0,l.jsx)(ex.h,{"aria-label":"Menu Colapse",icon:(0,l.jsx)(em.X,{w:4,h:4,color:(0,a.ff)("grey.5","white.7"),ml:1}),variant:"normal",onClick:()=>""})]})}),q("status")&&(0,l.jsx)(ec.Td,{children:i.isIsolated?(0,l.jsx)(et.Z,{label:(0,l.jsx)(_.Z,{infolabel:(0,l.jsxs)(l.Fragment,{children:["Isolated assets have limited borrowing power and other assets cannot be used as collateral. ",(0,l.jsx)("br",{}),"Learn more in our ",(0,l.jsx)(el.Z,{href:"https://discord.gg",children:"Discord"})]}),title:"Isolated"}),level:"MODERATE"}):(0,l.jsx)(et.Z,{label:(0,l.jsxs)(d.U,{gap:1,children:[(0,l.jsx)(m.x,{children:"Collateral"}),(0,l.jsx)(eu.n,{color:"green.5"})]}),level:"LOW"})}),q("underlyingBalanceUSD")&&(0,l.jsx)(ec.Td,{color:"white.9",children:(null==i?void 0:i.underlyingBalance)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(D.b,{symbol:"USD",children:(0,l.jsx)(f.B,{value:Number((null==i?void 0:i.underlyingBalanceUSD)==="0"?"":null==i?void 0:i.underlyingBalanceUSD),visibleDecimals:2,compact:!0,fontWeight:600})}),(0,l.jsx)(ep,{value:Number(null==i?void 0:i.underlyingBalance)})]})}),q("variableBorrowsUSD")&&(0,l.jsx)(ec.Td,{color:"white.9",children:(i.borrowRateMode===M.tk.Variable?i.variableBorrows:i.stableBorrows)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(D.b,{symbol:"USD",children:(0,l.jsx)(f.B,{value:Number(i.borrowRateMode===M.tk.Variable?i.variableBorrowsUSD:i.stableBorrowsUSD),visibleDecimals:2,compact:!0,fontWeight:600})}),(0,l.jsx)(ep,{value:Number(i.borrowRateMode===M.tk.Variable?i.variableBorrows:i.stableBorrows)})]})}),q("sumSupplyAPY")&&(0,l.jsx)(ec.Td,{color:"white.9",children:(null==i?void 0:i.underlyingBalance)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(d.U,{mb:1,children:(0,l.jsx)(eh.Z,{aIncentivesData:null!==(t=i.aIncentivesData)&&void 0!==t?t:[],symbol:i.iconSymbol,supplyApy:i.reserve.supplyAPY})}),(0,l.jsx)(eo.Z,{symbol:i.symbol,marketId:n})]})}),q("interestEarned")&&(0,l.jsx)(ec.Td,{color:"white.9",children:(null==i?void 0:i.interestEarned)===0?"":(0,l.jsx)(x.K,{gap:1,children:(0,l.jsx)(D.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(D.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(f.B,{value:Number((null==i?void 0:i.interestEarned)===0?"":null==i?void 0:i.interestEarned),visibleDecimals:2,compact:!0})})})})}),q("sumBorrowAPY")&&(0,l.jsx)(ec.Td,{color:"white.9",children:(null==i?void 0:i.variableBorrowsUSD)==="0"?"":(0,l.jsxs)(x.K,{gap:1,children:[(0,l.jsx)(d.U,{children:(0,l.jsx)(eb.Z,{aIncentivesData:null!=V?V:[],symbol:i.symbol,borrowApy:i.variableBorrowAPY})}),(0,l.jsx)(eo.Z,{symbol:i.symbol,marketId:n,type:"borrow"})]})}),q("interestPaid")&&(0,l.jsx)(ec.Td,{color:"white.9",children:(null==i?void 0:i.interestPaid)===0?"":(0,l.jsx)(x.K,{gap:1,children:(0,l.jsx)(D.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(D.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(f.B,{value:Number((null==i?void 0:i.interestPaid)===0?"":-((null==i?void 0:i.interestPaid)*1)),visibleDecimals:2,compact:!0})})})})}),q("usageAsCollateralEnabledOnUser")&&(0,l.jsx)(ec.Td,{color:"white.9",children:(0,l.jsx)(x.K,{children:(0,l.jsx)(E.r,{id:"collaterization",isChecked:i.usageAsCollateralEnabledOnUser,onChange:()=>{(0,Y.k)("open_collateral-usage_modal",{chainId:P,marketId:F,reserve:i.symbol,placement:"market_user_position_row"}),I(i.underlyingAsset)}})})}),q("action")&&(0,l.jsx)(ec.Td,{position:"sticky",borderColor:"white.4",zIndex:1,right:"0px",bg:U,w:"10%",p:"0 !important",children:(0,l.jsx)(b.xu,{p:{base:3,md:4},borderColor:"white.4",borderLeft:"1px solid #FFFFFF33",children:(0,l.jsxs)($.v,{children:[(0,l.jsx)(G.j,{ref:C,size:{base:"xs",md:"sm"},as:c.z,children:"Manage"}),(0,l.jsx)(J.h,{children:(0,l.jsxs)(Q.q,{zIndex:999,children:[(0,l.jsx)(X.s,{onClick:()=>{(0,Y.k)("open_borrow_modal",{chainId:P,marketId:F,reserve:i.symbol,placement:"market_user_position_row"}),j(i.underlyingAsset)},fontWeight:500,isDisabled:z,children:"Borrow"}),(0,l.jsx)(X.s,{onClick:()=>{(0,Y.k)("open_repay_modal",{chainId:P,marketId:F,reserve:i.symbol,placement:"market_user_position_row"}),p(i.underlyingAsset,i.borrowRateMode,i.isFrozen)},fontWeight:500,isDisabled:K,children:"Repay"}),(0,l.jsx)(X.s,{onClick:()=>{(0,Y.k)("open_supply_modal",{chainId:P,marketId:F,reserve:i.symbol,placement:"market_user_position_row"}),v(i.underlyingAsset)},fontWeight:500,isDisabled:T,children:"Supply"}),(0,l.jsx)(X.s,{onClick:()=>{(0,Y.k)("open_withdraw_modal",{chainId:P,marketId:F,reserve:i.symbol,placement:"market_user_position_row"}),g(i.underlyingAsset)},fontWeight:500,isDisabled:O,children:"Withdraw"})]})})]})})})]})},ev=s(91489),ef=s(61514),eg=s(78188),ew=s(71847),ek=s(80854),eS=s(91173),eD=s(79446),eB=s(33168),eI=s(5385);let eC=[{key:"name",name:"Asset",defaultShow:!0,show:!0,disable:!0},{key:"status",name:"Status",defaultShow:!1,show:!1,disable:!1},{key:"underlyingBalanceUSD",name:"Supplied",defaultShow:!0,show:!0,disable:!1},{key:"variableBorrowsUSD",name:"Borrowed",defaultShow:!0,show:!0,disable:!1},{key:"sumSupplyAPY",name:"Supply APY",defaultShow:!0,show:!0,disable:!1},{key:"interestEarned",name:"Interest Earned",defaultShow:!0,show:!0,disable:!1},{key:"sumBorrowAPY",name:"Borrow APY",defaultShow:!0,show:!0,disable:!1},{key:"interestPaid",name:"Interest Paid",defaultShow:!0,show:!0,disable:!1},{key:"usageAsCollateralEnabledOnUser",name:"Collateral",defaultShow:!0,show:!0,disable:!1},{key:"action",name:"Action",defaultShow:!0,show:!0,disable:!1}];var eA=()=>{let{currentMarket:e,currentChainId:r,currentMarketData:s,currentNetworkConfig:I}=(0,S.f)(),C=(0,ef.ZP)(),[_]=(0,o.a)("(min-width: 500px)"),{openClaimRewards:P,openHFModal:U}=(0,k.vR)(),{address:R}=(0,w.m)(),{walletBalances:E}=(0,eS.P)(),{data:N}=(0,eD.Z)(),{data:{user:W,reserves:Z,loading:T}}=(0,z.Z)(),{combinedAssets:Y}=(0,ew.Z)(W,I),L=s.v3&&Object.keys((0,eB.YN)(Z)).length>1,$=(0,a.ff)("#FFFFFF","black"),G=(0,a.ff)("grey.10","white.10"),[J,Q]=B.useState(!0),[X,ee]=B.useState(M.tk.Variable),er=Y.map(e=>{var r,s;return{...e,walletBalance:e.isWrappedBaseAsset?null===(r=E[ek.hP.toLowerCase()])||void 0===r?void 0:r.amount:null===(s=E[e.underlyingAsset])||void 0===s?void 0:s.amount}}),es=N.find(e=>e.marketName===s.marketTitle),el=es?es.data.rewardToken:"0",et=es?es.data.rewardUSD:0,ei=(0,B.useMemo)(()=>er.map(e=>{var r,l,t;let i=X===M.tk.Stable?null==e?void 0:null===(r=e.reserve)||void 0===r?void 0:r.sIncentivesData:null==e?void 0:null===(l=e.reserve)||void 0===l?void 0:l.vIncentivesData,{incentivesNetAPR:n}=(0,eg.Or)(null!==(t=e.aIncentivesData)&&void 0!==t?t:[],s),{incentivesNetAPR:o}=(0,eg.Or)(null!=i?i:[],s);return{...e,interestEarned:Number(e.underlyingBalanceUSD)*Number(e.supplyAPY),interestPaid:Number(e.variableBorrowsUSD)*Number(e.variableBorrowAPY),sumSupplyAPY:Number(e.reserve.supplyAPY)+Number(n),sumBorrowAPY:-Number(e.variableBorrowAPY)+Number(o)}}),[er]),[en,eo]=B.useState(eC),[ea,ec]=B.useState(null),ex=e=>{var r;let s=null===(r=eC.find(r=>r.key===e))||void 0===r?void 0:r.key;if(s)ec({key:s,direction:ea?"asc"===ea.direction?"desc":"desc"===ea.direction?"neutral":"asc":"asc"})},em=(0,B.useMemo)(()=>ea&&"neutral"!==ea.direction?(0,g.d)(ei,null==ea?void 0:ea.key,null==ea?void 0:ea.direction):ei,[ei,ea]),eu=(0,t.hE)((null==W?void 0:W.totalBorrowsMarketReferenceCurrency)||"0").plus((null==W?void 0:W.availableBorrowsMarketReferenceCurrency)||"0"),eb=eu.eq(0)?"0":(0,t.hE)((null==W?void 0:W.totalBorrowsMarketReferenceCurrency)||"0").div(eu).toFixed(),eh=(null==W?void 0:W.totalCollateralMarketReferenceCurrency)==="0"?"0":(0,t.hE)((null==W?void 0:W.totalBorrowsMarketReferenceCurrency)||"0").dividedBy((null==W?void 0:W.totalCollateralMarketReferenceCurrency)||"1").toFixed(),ej=()=>em.reduce((e,r)=>e+(r.interestEarned||0),0),ep=()=>em.reduce((e,r)=>e+(r.interestPaid||0),0);function eA(e){return(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(F,{title:"Net Worth",data:(0,l.jsx)(D.b,{symbol:"USD",children:(0,l.jsx)(f.B,{value:(null==e?void 0:e.netWorthUSD)||0,visibleDecimals:2})}),loading:T}),(0,l.jsx)(F,{title:"Net APY",data:(0,l.jsx)(D.b,{symbol:"%",children:(0,l.jsx)(V.Z,{value:100*e.netAPY||0})}),loading:T}),(0,l.jsx)(F,{title:"Net Interest",data:(0,l.jsx)(D.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(D.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(f.B,{value:Number(ej()-ep()),visibleDecimals:2,compact:!0})})}),loading:T}),(0,l.jsx)(F,{title:"Health Factor",data:(0,l.jsxs)(d.U,{children:[(0,l.jsx)(q.Z,{value:null==e?void 0:e.healthFactor}),(0,l.jsx)(c.z,{variant:"outline",size:"xs",onClick:()=>U(e.healthFactor,eh,e.currentLoanToValue,e.currentLiquidationThreshold),children:"Details"})]}),loading:T,hover:!0}),(0,l.jsx)(F,{title:"Available Rewards",data:(0,l.jsxs)(d.U,{children:[(0,l.jsx)(D.b,{symbol:"USD",children:(0,l.jsx)(f.B,{value:et||0,visibleDecimals:2})}),et>0&&(0,l.jsx)(c.z,{variant:"ghost",size:"xs",onClick:()=>P(el,r),children:"Claim"})]}),loading:T})]})}return void 0===R||0===R.length?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(l.Fragment,{children:0===er.length?null:(0,l.jsx)(eI.Z,{color:G,title:"User Positions",dontShowByDefault:!1,rightComponent:0===er.length?(0,l.jsx)(u.O,{width:100,height:7}):(0,l.jsx)(K.Z,{data:en,onUpdate:e=>{eo(e),localStorage.setItem("marketUserPositionHeaderKeys",JSON.stringify(e))}}),children:(0,l.jsx)(b.xu,{mb:4,children:T?(0,l.jsx)(H.Z,{}):(0,l.jsxs)(b.xu,{children:[J&&!1,(0,l.jsxs)(b.xu,{bg:(0,a.ff)("#FFFFFF","transparent"),border:"1px",overflow:"hidden",borderRadius:"12px",borderBottom:J?0:"1px",borderBottomRadius:J?0:"12px",pb:J?3:0,mb:J?-3:0,borderColor:(0,a.ff)("grey.3","white.5"),children:[(0,l.jsxs)(d.U,{children:[(0,l.jsx)(d.U,{flex:1,alignItems:"center",justifyContent:"left",children:(0,l.jsx)(m.x,{fontSize:"md",opacity:.5,color:G,pl:4,children:"Your Position"})}),(0,l.jsxs)(d.U,{children:[_&&eA(W),(0,l.jsx)(d.U,{px:4,py:5,bg:"white.3",height:"100%",onClick:()=>Q(!J),cursor:"pointer",children:J?(0,l.jsx)(n.g,{fontSize:24}):(0,l.jsx)(i.v,{fontSize:24})})]})]}),!_&&J&&eA(W),J&&(0,l.jsxs)(d.U,{borderTop:"1px",borderTopColor:(0,a.ff)("#00000010","#FFFFFF10"),flexDir:{base:"column",md:"row"},gap:{base:0,md:1},alignItems:{base:"flex-start",md:"center"},children:[(0,l.jsxs)(x.K,{gap:0,flex:{base:1,md:.5},p:3,children:[(0,l.jsx)(m.x,{fontSize:"sm",opacity:.5,color:G,pl:1,mb:1,children:"Supply data"}),(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(A,{title:"Balance:",data:(0,l.jsx)(D.b,{symbol:"USD",children:(0,l.jsx)(f.B,{value:(null==W?void 0:W.totalLiquidityUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"APY:",data:(0,l.jsx)(D.b,{symbol:"%",children:(0,l.jsx)(f.B,{value:(null==W?void 0:W.earnedAPY)*100||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"Collateral:",data:(0,l.jsx)(D.b,{symbol:"USD",children:(0,l.jsx)(f.B,{value:(null==W?void 0:W.totalCollateralUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"Interest:",data:(0,l.jsx)(D.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(D.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(f.B,{value:Number(ej()),visibleDecimals:2,compact:!0})})})})]})]}),(0,l.jsxs)(x.K,{gap:0,borderLeft:{base:0,md:"1px"},borderTop:{base:"1px",md:"0"},flex:{base:1,md:.5},borderColor:"#FFFFFF10 !important",p:3,children:[(0,l.jsx)(m.x,{fontSize:"sm",opacity:.5,color:G,pl:1,mb:1,children:"Borrow data"}),(0,l.jsxs)(d.U,{flexWrap:"wrap",children:[(0,l.jsx)(A,{title:"Balance:",data:(0,l.jsx)(D.b,{symbol:"USD",children:(0,l.jsx)(f.B,{value:(null==W?void 0:W.totalBorrowsUSD)||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"APY:",data:(0,l.jsx)(D.b,{symbol:"%",children:(0,l.jsx)(f.B,{value:(null==W?void 0:W.debtAPY)*100||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"Power Used:",data:(0,l.jsx)(D.b,{symbol:"%",children:(0,l.jsx)(f.B,{value:eb||0,visibleDecimals:2})})}),(0,l.jsx)(A,{title:"Interest:",data:(0,l.jsx)(D.b,{symbol:"USD",symbolPosition:"prefix",textProps:{textStyle:"s"},children:(0,l.jsx)(D.b,{symbol:"/ year",symbolPosition:"suffix",textProps:{textStyle:"s"},children:(0,l.jsx)(f.B,{value:Number(ep()),visibleDecimals:2,compact:!0})})})}),L&&(0,l.jsx)(A,{title:"E-Mode:",data:(0,l.jsx)(O,{})})]})]})]})]}),J&&_&&(0,l.jsx)(h.x,{mx:"auto",sx:{border:"1px",borderRadius:"12px",borderColor:(0,a.ff)("grey.3","white.5"),bgColor:(0,a.ff)("#FFFFFF","transparent"),padding:"0px",margin:"0px"},w:"100%",children:(0,l.jsxs)(j.i,{variant:"unstyled",bg:$,border:"none",children:[(0,l.jsx)(p.h,{children:(0,l.jsx)(y.Tr,{children:eC.map((e,r)=>(0,l.jsx)(ev.Z,{sticky:(null==eC?void 0:eC.length)-1===r?"right":void 0,onClick:()=>ex(e.key),sortDirection:(null==ea?void 0:ea.key)===e.key?null==ea?void 0:ea.direction:void 0,show:e.show,children:(0,l.jsx)(m.x,{children:e.name})},e.key))})}),(0,l.jsx)(v.p,{children:null==em?void 0:em.map((r,s)=>(0,l.jsx)(ey,{item:r,marketId:e,headers:en,apr:C},s))})]})}),!_&&(0,l.jsx)(b.xu,{mt:J?0:4,children:em.map((r,s)=>(0,l.jsx)(ed,{item:r,marketId:e,apr:C},s))})]})})})})}}}]);